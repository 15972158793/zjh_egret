var __reflect=this&&this.__reflect||function(e,t,a){e.__class__=t,a?a.push(t):a=[t],e.__types__=e.__types__?a.concat(e.__types__):a},__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),BaseUI=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.addStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemove,t),t}return __extends(t,e),t.prototype.childrenCreated=function(){},t.prototype.addStage=function(){},t.prototype.onRemove=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.addStage,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)},t.prototype.hide=function(e){switch(e){case 1:null!=this.parent&&this.parent.removeChild(this);break;case 0:this.visible=!1}},t.prototype.onDestroy=function(){},t}(eui.Component);__reflect(BaseUI.prototype,"BaseUI");var WeixinUtil=function(e){function t(){var t=e.call(this)||this;return t.isSign=!1,t._imgUrl="https://mmbiz.qlogo.cn/mmbiz_png/BAJHhc1xzGN5mkeMiapQiaaXmvkL7E0o8QIy3Pps3jYicib84h9jfrEynqnauEvDaYcLTYFxTibMGu3p9GFpicytKtEg/0?wx_fmt=png",t}return __extends(t,e),t.prototype.initWeixinInfo=function(e,a,n,i){this.player=PlayerInfoCache.getInstance().getMe(),this._success=i;var r=window.location.href.split("#")[0],o=encodeURIComponent(r);""!=n?this._link="http://daheng.vequn.org?roomId="+n:this._link="http://daheng.vequn.org",this._title=e,this._desc=a;var s=t.netAddr+"url="+o,c=new egret.URLLoader;c.dataFormat=egret.URLLoaderDataFormat.TEXT,c.addEventListener(egret.Event.COMPLETE,this.onGet_WeiXinComplete,this);var l=new egret.URLRequest(s);l.method=egret.URLRequestMethod.GET,l.data=new egret.URLVariables("url="+o),c.load(l)},t.prototype.successShare=function(){alert("fenxiangchengg")},t.prototype.onGet_WeiXinComplete=function(e){var a=this,n=JSON.parse(e.target.data);t.wxOpenId=n.openid,t.wxHeadImg=n.headimgurl,t.wxNickName=n.nickname,t.bodyConfig=new BodyConfig,t.bodyConfig.debug=!1,t.bodyConfig.appId=n.appId,t.bodyConfig.timestamp=n.timestamp,t.bodyConfig.nonceStr=n.nonceStr,t.bodyConfig.signature=n.signature,t.bodyConfig.jsApiList=["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","translateVoice","startRecord","stopRecord","onRecordEnd","playVoice","pauseVoice","stopVoice","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"],wx.config(t.bodyConfig),wx.ready(function(){wx.hideMenuItems({menuList:["menuItem:copyUrl","menuItem:share:email","menuItem:openWithQQBrowser","menuItem:share:email","menuItem:openWithSafari"]}),wx.showMenuItems({menuList:["menuItem:refresh","menuItem:share:appMessage","menuItem:share:timeline"]}),t.appInfo=new BodyMenuShareAppMessage,t.appInfo.title=a._title,t.appInfo.desc=a._desc,t.appInfo.link=a._link,t.appInfo.imgUrl=a.player.headImageUrl,t.appInfo.type="link",t.appInfo.success=function(){null!=a._success&&a._success()},wx.onMenuShareAppMessage(t.appInfo),t.timelineInfo=new BodyMenuShareTimeline,t.timelineInfo.imgUrl=a.player.headImageUrl,t.timelineInfo.link=a._link,t.timelineInfo.title=a._title,t.timelineInfo.success=function(){null!=a._success&&a._success()},wx.onMenuShareTimeline(t.timelineInfo)})},t.prototype.onWxPay=function(e,t,a,n,i,r){wx.ready(function(){wx.chooseWXPay({appId:e,timestamp:t,nonceStr:a,"package":n,paySign:i,signType:r,success:function(e){},fail:function(e){}})})},t.prototype.onStartRecord=function(){wx.startRecord({cancel:function(){alert("用户拒绝授权录音")}})},t.prototype.onStopRecord=function(e){wx.stopRecord({success:function(a){egret.localStorage.getItem("IsFirst"),sessionStorage.getItem("isCansel");1==e&&t.getInstance().uploadVoice2(a.localId)},fail:function(e){}})},t.prototype.uploadVoice2=function(e){var a=e;-1!=a.indexOf("wxlocalresource")&&(a=a.replace("wxlocalresource","wxLocalResource")),wx.uploadVoice({localId:a,isShowProgressTips:1,success:function(e){var a=e.serverId;t.getInstance().dispatchEventWith("UPLOAD_VOICE_SUCCESS",!1,a)}})},t.prototype.startRecord=function(){wx.startRecord({}),wx.onVoiceRecordEnd({complete:function(e){var a=e.localId;t.getInstance().uploadVoice2(a)}})},t.prototype.downloadVoice=function(e){wx.downloadVoice({serverId:e,isShowProgressTips:0,success:function(e){var a=e.localId;t.getInstance().ShowRecord(a)}})},t.prototype.ShowRecord=function(e){wx.playVoice({localId:e}),t.getInstance().onVoicePlayEnd()},t.prototype.onVoicePlayEnd=function(){wx.onVoicePlayEnd({success:function(e){t.getInstance().dispatchEventWith("StePlayerYuying",!1)},fail:function(e){}})},t.prototype.returnWechat=function(){wx.closeWindow({success:function(){}})},t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.netAddr="http://daheng.vequn.org:7002/share?",t}(egret.EventDispatcher);__reflect(WeixinUtil.prototype,"WeixinUtil");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center";var e='<e:Group width="1206" height="750" xmlns:e="http://ns.egret.com/eui">\n                    <e:Image source="" horizontalCenter="0" verticalCenter="0"/>\n                    <e:Image id="test_bar" name="bar" source="" x="400" y="480" anchorOffsetX="0" width="209"/>\n                    <e:Label id="text" name="loadingText" horizontalCenter="0" verticalCenter="200"/>\n               </e:Group>',t=EXML.parse(e),a=new t;a.x=0,a.y=0,this.addChild(a),this.bar=a.getChildByName("bar"),this.imgGroup=a.getChildByName("imgGroup"),this.loadNum=a.getChildByName("loadingText"),this.bar.width=0},t.prototype.setProgress=function(e,t){var a=Math.floor(e/t*100);this.loadNum.text="Loading。。。。"+a+"%",this.bar.width=e/t*411,IframeManager.getInstance().sendProgress(.5+e/t*.5)},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var Main=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isThemeLoadEnd=!1,t.isResourceLoadEnd=!1,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.init()},t.prototype.init=function(){var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),console.log("开始加载资源"+(new Date).getTime()),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig(window.ossServer+"resource/default.res.json",window.ossServer+"resource/")},t.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme(window.ossServer+"resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),console.log("preload加载"),RES.loadGroup("preload")},t.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},t.prototype.onResourceLoadComplete=function(e){"loading"==e.groupName?(console.log("loading加载完"),this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene()):"preload"==e.groupName&&(console.log("preload加载完"),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.loadGroup("loading"))},t.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.initStageView()},t.prototype.initStageView=function(){var e=new StageView;this.addChild(e)},t.prototype.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},t.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.onResourceProgress=function(e){"loading"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},t.prototype.readXml=function(){var e="resource/configs.xml";RES.getResByUrl(e,this.respXMLHandler,this)},t.prototype.respXMLHandler=function(e){Configs.xml=e,XmlParse.getAddress()},t}(eui.UILayer);__reflect(Main.prototype,"Main");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,a,n){function i(e){t.call(n,e)}function r(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),a.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var NativeConstant=function(){function e(){}return e.NATIVES_PAY_ARR=["weChatPay","aliPay"],e.NATIVE_PAY="pay",e.NATIVE_INVITATION="invitation",e.NATIVE_SHARERESULT="shareResult",e.NATIVE_SHAREAPP="shareApp",e.NATIVE_CONNECTFAIL="connectfail",e.NATIVE_LOGIN="LOGIN",e.NATIVE_UID="UID",e.NATIVE_USERINFO="userInfo",e.NATIVE_UPDATE_GAMALIST="update_gameList",e.NATIVE_WECHAT="update_wechat",e.GET_GAME_LIST="gameList",e.UPDATE_GAME="updateGame",e.NATIVE_SOUNDOPEN="soundOpen",e.NATIVE_MUSICOPEN="musicOpen",e.NATIVE_APPRUN="apprun",e}();__reflect(NativeConstant.prototype,"NativeConstant");var CardEvent=function(e){function t(t,a,n,i,r){void 0===i&&(i=!1),void 0===r&&(r=!1);var o=e.call(this,t,i,r)||this;return o._value=a,o._selected=n,o}return __extends(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(e){this._selected=e},enumerable:!0,configurable:!0}),t.TURNCARD="turncard",t.CLICK_CARD="click_card",t}(egret.Event);__reflect(CardEvent.prototype,"CardEvent");var NativeEvent=function(e){function t(t,a,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1);var r=e.call(this,t,n,i)||this;return r._data=a,r}return __extends(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!0,configurable:!0}),t.EVENT_LOGIN="event_login",t.EVENT_WECHAT="wechatInfo",t.EVENT_CHOICEGAME="choice_game",t.EVENT_ROOMID="roomId",t.UPDATE_GAME="update_game",t.GET_GAME_LIST="get_game_list",t.EVENT_APPRUN="apprun",t}(egret.Event);__reflect(NativeEvent.prototype,"NativeEvent");var NetEvent=function(e){function t(t,a,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1);var r=e.call(this,t,n,i)||this;return r._data=a,r}return __extends(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!0,configurable:!0}),t.RECEVICEMESSAGE="recevicemessage",t.GOTOONEHALL="gotoonehalls",t.CLOSESOCKET="closesocket",t.OPENSOCKET="openSocket",t.BACKHALL="backhall",t}(egret.Event);__reflect(NetEvent.prototype,"NetEvent");var StageEvent=function(e){function t(t,a,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1);var r=e.call(this,t,n,i)||this;return r._data=a,r}return __extends(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!0,configurable:!0}),t.VIEW_REMOVED="viewRomoved",t.EVENT_TIPS="tips",t.VIEW_ADDED="viewAdd",t.HIDE_BTN="hideBtn",t.VIEW_TIPS="viewTips",t.UPDATE_NUMS="updateNums",t.EVENT_CHANGEACCOUNT="changeaccount",t}(egret.Event);__reflect(StageEvent.prototype,"StageEvent");var ViewEvent=function(e){function t(t,a,n){return void 0===a&&(a=!1),void 0===n&&(n=!1),e.call(this,t,a,n)||this}return __extends(t,e),t.VIEW_REMOVED="viewRomoved",t.EVENT_TIPS="tips",t.VIEW_ADDED="viewAdd",t}(egret.Event);__reflect(ViewEvent.prototype,"ViewEvent");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,a){function n(n){t.call(a,n,e)}if(RES.hasRes(e)){var i=RES.getRes(e);i?n(i):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Cards=function(){function e(e,t){void 0===t&&(t=!0),this.CARD_NUM=54,this.VALUE_NUM=13,this.SUIT_NUM=4,this.VALUE_MAP=new Array("01","02","03","04","05","06","07","08","09","10","11","12","13","14","15"),this._isSelect=!0,this._isSelected=!1,this.mouseMoveCount=0,this.bigCard=!0,this.isDzCard=!1,this.bigCard=t,this.setUI(e),this.newCardUI()}return e.prototype.setUI=function(e){this.bigCard||(this._isSelect=!1),-1==e?(this._serialNo=e,this._suit=-1,this._value=-1):(this._serialNo=e,this._suit=e%this.SUIT_NUM,this._value=parseInt(e/this.SUIT_NUM+""))},e.prototype.newCardUI=function(){this.bigCard?this.cardUI=new CardBigView(this):this.cardUI=new CardSmallView(this),this.cardUI.name="card"+this._serialNo,this.cardUI.hasEventListener(egret.Event.ADDED_TO_STAGE)||this.cardUI.addEventListener(egret.Event.ADDED_TO_STAGE,this.onCreateCardUI,this),this.cardUI.hasEventListener(egret.Event.REMOVED_FROM_STAGE)||this.cardUI.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveCardUI,this)},e.prototype.onCreateCardUI=function(e){},e.prototype.onRemoveCardUI=function(e){this.cardUI.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onCreateCardUI,this),this.cardUI.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveCardUI,this),this.cardUI=null},e.prototype.onSelectCard=function(e){e.target==this.cardUI&&this.isSelect&&(0==this.cardUI.y?(this.cardUI.y=this.cardUI.y-15,this._isSelected=!0):(this.cardUI.y=this.cardUI.y+15,this._isSelected=!1))},e.prototype.cancelSelectCard=function(){0!=this.cardUI.y&&(this.cardUI.y=0,this._isSelected=!1)},e.prototype.selectCarded=function(){0==this.cardUI.y?this.cardUI.y=this.cardUI.y-15:this.cardUI.y=0,0==this.cardUI.y?this._isSelected=!1:this._isSelected=!0},e.prototype.selectCard=function(e){var t=0;t=this._value+1>10?10:this._value+1,0==this.cardUI.y&&this.mouseMoveCount!=e?(this.mouseMoveCount=e,this.cardUI.y=this.cardUI.y-15,this._isSelected=!0):this.mouseMoveCount!=e&&(this.mouseMoveCount=e,this.cardUI.y=this.cardUI.y+15,this._isSelected=!1),this.cardUI.parent.dispatchEvent(new CardEvent(CardEvent.CLICK_CARD,t,this._isSelected))},e.prototype.getCardUI=function(){return null==this.cardUI&&this.newCardUI(),this.cardUI},e.getCardsForList=function(t,a){void 0===a&&(a=!0);for(var n=new Array,i=0;i<t.length;i++){var r=4*(t[i].number-2)+t[i].flower;n.push(new e(r,a))}return n},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"suit",{get:function(){return this._suit},set:function(e){this._suit=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serialNo",{get:function(){return this._serialNo},set:function(e){this._serialNo=e,this.setUI(this._serialNo)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSelected",{get:function(){return 0==this.cardUI.y?this._isSelected=!1:this._isSelected=!0,this._isSelected},set:function(e){this._isSelected=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSelect",{get:function(){return this._isSelect},set:function(e){this._isSelect=e},enumerable:!0,configurable:!0}),e.prototype.toString=function(){var e=["方块","梅花","红桃","黑桃","小王","大王"];return this._serialNo+":"+e[this._suit]+this.VALUE_MAP[this.value]},e}();__reflect(Cards.prototype,"Cards");var CardsType=function(){function e(){}return e.NO_NIU=0,e.NIU_ONE=2,e.NIU_TWO=3,e.NIU_THREE=4,e.NIU_FOUR=5,e.NIU_FIVE=6,e.NIU_SIX=7,e.NIU_SEVEN=8,e.NIU_EIGHT=9,e.NIU_NINE=10,e.NIU_TEN=22,e.NIU_WUHUA=44,e.NIU_BOMO=88,e}();__reflect(CardsType.prototype,"CardsType");var PlayerVo=function(){function e(){this._id="0",this._isMine=!1,this._sex=!1,this._ip="1.1.1.1",this._gamenum="100",this._down="12%",this._zan="12",this._hei="122",this._score=0,this._nickName="",this._openid="",this._gold=0,this._headImageUrl="",this._seatNo=0,this._localSeatNo=0,this._isBanker=0,this._recommandCode="0",this._timeStamp=0,this._isOwner=!1,this._isReady=!1,this._isGameingSeatDown=!1,this._diamond=0,this._status=0}return Object.defineProperty(e.prototype,"isGameingSeatDown",{get:function(){return this._isGameingSeatDown},set:function(e){this._isGameingSeatDown=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isReady",{get:function(){return this._isReady},set:function(e){this._isReady=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOwner",{get:function(){return this._isOwner},set:function(e){this._isOwner=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"diamond",{get:function(){return this._diamond},set:function(e){this._diamond=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this._status},set:function(e){this._status=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMine",{get:function(){return this._isMine},set:function(e){this._isMine=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openid",{get:function(){return this._openid},set:function(e){this._openid=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sex",{get:function(){return this._sex},set:function(e){this._sex=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ip",{get:function(){return this._ip},set:function(e){this._ip=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gamenum",{get:function(){return this._gamenum},set:function(e){this._gamenum=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"down",{get:function(){return this._down},set:function(e){this._down=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zna",{get:function(){return this._zan},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zan",{set:function(e){this._zan=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hei",{get:function(){return this._hei},set:function(e){this._hei=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nickName",{get:function(){return this._nickName},set:function(e){this._nickName=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gold",{get:function(){return this._gold},set:function(e){this._gold=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headImageUrl",{get:function(){return this._headImageUrl},set:function(e){this._headImageUrl=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"seatNo",{get:function(){return this._seatNo},set:function(e){this._seatNo=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localSeatNo",{get:function(){return this._localSeatNo},set:function(e){this._localSeatNo=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBanker",{get:function(){return this._isBanker},set:function(e){this._isBanker=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recommandCode",{get:function(){return this._recommandCode},set:function(e){this._recommandCode=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeStamp",{get:function(){return this._timeStamp},set:function(e){this._timeStamp=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"score",{get:function(){return this._score},set:function(e){this._score=e},enumerable:!0,configurable:!0}),e}();__reflect(PlayerVo.prototype,"PlayerVo");var RoomInfo=function(){function e(){this._roomId=0,this._bankerType=1,this._baseScore=0,this._chargeType=0,this._roomOwnerId="",this._roomStatus=0,this._reTime=0,this._roomType=0,this._remainRound=0}return Object.defineProperty(e.prototype,"roomId",{get:function(){return this._roomId},set:function(e){this._roomId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bankerType",{get:function(){return this._bankerType},set:function(e){this._bankerType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseScore",{get:function(){return this._baseScore},set:function(e){this._baseScore=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chargeType",{get:function(){return this._chargeType},set:function(e){this._chargeType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roomOwnerId",{get:function(){return this._roomOwnerId},set:function(e){this._roomOwnerId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roomStatus",{get:function(){return this._roomStatus},set:function(e){this._roomStatus=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reTime",{get:function(){return this._reTime},set:function(e){this._reTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roomType",{get:function(){return this._roomType},set:function(e){this._roomType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"remainRound",{get:function(){return this._remainRound},set:function(e){this._remainRound=e},enumerable:!0,configurable:!0}),e}();__reflect(RoomInfo.prototype,"RoomInfo");var NativeCommunication=function(e){function t(){var t=e.call(this)||this;return t.appMessageCall(),t}return __extends(t,e),t.getInstence=function(){return null==this.ins&&(this.ins=new t),this.ins},t.prototype.appMessageCall=function(){egret.ExternalInterface.addCallback(NativeConstant.NATIVE_UID,this.getUid),egret.ExternalInterface.addCallback(NativeConstant.NATIVE_WECHAT,this.getWeChatInfo),egret.ExternalInterface.addCallback(NativeConstant.GET_GAME_LIST,this.onGameList),egret.ExternalInterface.addCallback(NativeConstant.UPDATE_GAME,this.onUpdate),egret.ExternalInterface.addCallback(NativeConstant.NATIVE_APPRUN,this.appRun)},t.prototype.appRun=function(e){var a=JSON.parse(e);t.ins.dispatchEvent(new NativeEvent(NativeEvent.EVENT_WECHAT,a))},t.prototype.getWeChatInfo=function(e){var a=JSON.parse(e);t.ins.dispatchEvent(new NativeEvent(NativeEvent.EVENT_APPRUN,a))},t.prototype.getAppLoginInfo=function(e){var a=JSON.parse(e);t.ins.dispatchEvent(new NativeEvent(NativeEvent.EVENT_LOGIN,a))},t.prototype.getUid=function(e){},t.prototype.onGameList=function(e){var a=JSON.parse(e);console.log("收到游戏列表消息 --- "+a),t.ins.dispatchEvent(new NativeEvent(NativeEvent.GET_GAME_LIST,a))},t.prototype.onUpdate=function(e){var a=JSON.parse(e);console.log("收到游戏更新消息 --- "+a),t.ins.dispatchEvent(new NativeEvent(NativeEvent.UPDATE_GAME,a))},t.prototype.sendMessageToApp=function(e,t){egret.ExternalInterface.call(e,t)},t}(eui.Component);__reflect(NativeCommunication.prototype,"NativeCommunication");var DeskManager=function(){function e(e,t,a,n,i,r,o){this.sunNum=0,this.isMouseDown=!1,this.isMouseMove=!1,this.mouseMoveCount=0,this.dealCardTimer=new egret.Timer(0),this.playerCard1=e,this.playerCard2=t,this.playerCard3=a,this.playerCard4=n,this.playerCard5=i,this.caluate=o;var s=this.playerCard1.getChildByName("handCardList");s.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onMouseDown,this),s.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onMouseOut,this),s.addEventListener(egret.TouchEvent.TOUCH_END,this.onMouseUp,this)}return e.prototype.removeCardLitEventListeners=function(){var e=this.playerCard1.getChildByName("handCardList");e.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onMouseDown,this),e.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onMouseOut,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onMouseUp,this)},e.prototype.selectedCard=function(e){var t=e.target;null!=t&&null!=t.card&&t.card.selectCard(this.mouseMoveCount)},e.prototype.onRoll_over=function(e){this.isMouseDown=!1},e.prototype.onMouseOut=function(e){this.isMouseDown=!1},e.prototype.onMouseDown=function(e){this.isMouseDown=!0,this.isMouseMove=!1,this.mouseMoveCount++},e.prototype.onMouseUp=function(e){this.isMouseDown=!1;var t=e.target;null!=t&&null!=t.card&&t.card.selectCard(this.mouseMoveCount)},e.prototype.onMouseMove=function(e){this.isMouseMove=!0;var t=(this.playerCard1.getChildByName("cardList"),e.target);null!=t&&this.isMouseDown&&null!=t.card&&t.card.selectCard(this.mouseMoveCount)},e}();__reflect(DeskManager.prototype,"DeskManager");var DragonBonesManager=function(){function e(){}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.startDragon=function(e,t,a,n,i,r,o,s,c,l,h,d,u,p,g){void 0===h&&(h=1),void 0===d&&(d=!1),void 0===u&&(u=1),void 0===p&&(p=1),void 0===g&&(g="dragonbones");try{null==this.factory&&(this.factory=new dragonBones.EgretFactory);var y=this.factory.getDragonBonesData(t);if(null==y){var v=RES.getRes(a+"_ske_json"),m=dragonBones.DataParser.parseDragonBonesData(v);this.factory.addDragonBonesData(m)}var f=this.factory.getTextureAtlas(t);if(null==f){var I=new dragonBones.EgretTextureAtlas(RES.getRes(i+"_tex_png"),RES.getRes(n+"_tex_json"));this.factory.addTextureAtlas(I)}var S=this.factory.buildArmatureDisplay(r);S.animation.timeScale=h,S.animation.play(o,l),S.x=s,S.y=c,S.scaleX=u,S.scaleY=p,S.once(egret.Event.COMPLETE,function(){d||(e.dispatchEventWith("DragonBonesComplete",!1),S.animation.reset(),null!=S&&null!=S.parent&&S.parent.removeChild(S),S=null)},this),S.name=g,e.addChild(S)}catch(C){}},e.prototype.playDragon=function(e,t,a,n,i,r){try{var o=RES.getRes(t+"_ske_json"),s=RES.getRes(t+"_tex_json"),c=RES.getRes(t+"_tex_png"),l=dragonBones.EgretFactory.factory;(null==l.getDragonBonesData("drag_"+t)||null==l.getTextureAtlasData("drag_"+t))&&(l.parseDragonBonesData(o,"drag_"+t),l.parseTextureAtlasData(s,c,"drag_"+t));var h=l.buildArmatureDisplay(a);h.x=i.dx||0,h.y=i.dy||0,e.addChild(h),h.once(dragonBones.EventObject.COMPLETE,function(){console.log("播放完成"),h&&h.dispose(),!i.noRemove&&h.parent&&h.parent.removeChild(h),e.dispatchEventWith("DragonBonesComplete",!1),r&&r()},this),h.name=i.names||"dragonBones",h.animation.timeScale=i.timeScale||1,h.animation.play(n,i.playTimes||0)}catch(d){console.log("动画播放失败 -- "+d)}},e}();__reflect(DragonBonesManager.prototype,"DragonBonesManager");var PlayerInfoCache=function(){function e(){this.playerCache={},this.commandCache=[]}return e.getInstance=function(){return null==this.ins&&(this.ins=new e),this.ins},e.prototype.addCommandCache=function(e){null!=this.commandCache&&this.commandCache.push(e)},e.prototype.getFirstCommandCache=function(){var e=this.commandCache;return e.length>0?e.shift():null},e.prototype.removeCacheFormCommandCache=function(){for(var e=this.commandCache;;){if(0==e.length)return;e.shift()}},e.prototype.addPlayer=function(e){this.playerCache[e.id]=e},e.prototype.getPlayerByLocalSeatno=function(e){for(var t in this.playerCache){var a=this.playerCache[t];if(a.localSeatNo==e)return a}},e.prototype.getPlayerById=function(e){for(var t in this.playerCache){var a=this.playerCache[t];if(a.id==e)return a}},e.prototype.getPlayerSize=function(){var e=0;for(var t in this.playerCache){var a=this.playerCache[t];null!=a&&a.seatNo>0&&a.seatNo<7&&e++}return e},e.prototype.getSeatDownPlayer=function(){var e=[];for(var t in this.playerCache){var a=this.playerCache[t];null!=a&&a.seatNo>0&&a.seatNo<7&&e.push(a)}return e},e.prototype.getLocalSeatNoBySeatNo=function(e){for(var t in this.playerCache){var a=this.playerCache[t];if(a.seatNo==e)return a.localSeatNo}return 0},e.prototype.deletePlayerByID=function(e){delete this.playerCache[e]},e.prototype.getMe=function(){for(var e in this.playerCache){var t=this.playerCache[e];if(t.isMine)return t}return null},e.prototype.getMeSeatNo=function(){var e=this.getMe();return null!=e?e.seatNo:-1},e.prototype.initPlayerLocalSeatNo=function(){var e=this.getMeSeatNo();-1!=e&&(0==e?this.initAllPlayerLocalSeatNoByLooking():this.initAllPlayerLocalSeatNoByPlaying1(e))},e.prototype.initPlayerLocalSeatNo1=function(){var e=[];for(var t in this.playerCache){var a=this.playerCache[t];0!=a.seatNo&&e.push(a)}e.sort(Utils.sortOnPlayerByTimeStamp);for(var n=e.length,i=0;n>i;i++){var r=e[i];r.localSeatNo=i+1,this.addPlayer(r)}},e.prototype.initPlayerLocalSeatNo2=function(e){var t=[];for(var a in this.playerCache){var n=this.playerCache[a];n.id!=PlayerManager.id?t.push(this.playerCache[a]):n.localSeatNo=5}t.sort(Utils.sortOnPlayerByTimeStamp);for(var i=t.length,r=0;i>r;r++){var o=t[r];o.id==PlayerManager.id?o.localSeatNo=5:o.localSeatNo=r+1,this.addPlayer(o)}},e.prototype.initAllPlayerLocalSeatNoByLooking=function(){for(var e in this.playerCache){var t=this.playerCache[e];t.localSeatNo=t.seatNo}},e.prototype.initAllPlayerLocalSeatNoByPlaying=function(e){var t=e,a=e+1,n=e+2,i=e+3,r=e+4;switch(e){case 1:a=2,n=3,i=4,r=5;break;case 2:a=3,n=4,i=5,r=1;break;case 3:a=4,n=5,i=1,r=2;break;case 4:a=5,n=1,i=2,r=3;break;case 5:a=1,n=2,i=3,r=4;break;default:return}for(var o in this.playerCache){var s=this.playerCache[o];s.seatNo==t?s.localSeatNo=5:s.seatNo==a?s.localSeatNo=1:s.seatNo==n?s.localSeatNo=2:s.seatNo==i?s.localSeatNo=3:s.seatNo==r&&(s.localSeatNo=4)}},e.prototype.initAllPlayerLocalSeatNoByPlaying1=function(e){var t=e,a=e+1,n=e+2,i=e+3,r=e+4,o=e+5;switch(e){case 1:a=2,n=3,i=4,r=5,o=6;break;case 2:a=3,n=4,i=5,r=6,o=1;break;case 3:a=4,n=5,i=6,r=1,o=2;break;case 4:a=5,n=6,i=1,r=2,o=3;break;case 5:a=6,n=1,i=2,r=3,o=4;break;case 6:a=1,n=2,i=3,r=4,o=5;break;default:return}for(var s in this.playerCache){var c=this.playerCache[s];c.seatNo==t?c.localSeatNo=6:c.seatNo==a?c.localSeatNo=1:c.seatNo==n?c.localSeatNo=2:c.seatNo==i?c.localSeatNo=3:c.seatNo==r?c.localSeatNo=4:c.seatNo==o&&(c.localSeatNo=5)}},e}();__reflect(PlayerInfoCache.prototype,"PlayerInfoCache");var PlayerManager=function(){function e(){}return e.initWxShare=function(){var t=(PlayerInfoCache.getInstance().getMe(),"顶注："+e.maxTotalChip+"  局数："+e.totalRound+"局  底分："+e.injectNum+"分 比牌："+e.minVsScore+" 扣费方式："+e.costType);IframeManager.getInstance().initWxShare("{platform}-6人三张牌,房间号为"+e.roomId,t)},e.injectNum=1,e.roomMasterType=0,e.maxInjectNum=20,e.minInjectNum=1,e.gameMusicOn=!1,e.gameEffectOn=!0,e.isBreakLine=!1,e.isGameStart=!1,e.GiveUpCard=!1,e.VSCardLose=!1,e.seatDown=!1,e.lookCard=!1,e.round=0,e.roomEndTime="",e.ownNickName="",e.gold="",e.isHidden=!1,e.isAA=!0,e.totalRound="",e.leftRound="",e.maxTotalChip="",e.baoziWin=1,e.gameType=1,e.gameRule=0,e.minAddInjectNum=2,e.isCanLookCard=!0,e.dissolveTime=15e3,e.dissolveName="",e.followScore=1,e.VsPlayerArr=[],e.followForever=!1,e.isResetSeat=!1,e.isTotalGameStart=!1,e.isGameState=0,e.minVsScore=0,e.costType="房主支付",e}();__reflect(PlayerManager.prototype,"PlayerManager");var PlayerSoundManager=function(){function e(){this._playerSound=new SoundManager}return e.prototype.playerWin=function(){this._playerSound.playSound("winMusic")},e.getInstance=function(){return null==this.ins&&(this.ins=new e),this.ins
},e.prototype.playerCardType=function(e,t){var a=-1;t==CardsType.NIU_ONE?a=1:t==CardsType.NIU_TWO?a=2:t==CardsType.NIU_THREE?a=3:t==CardsType.NIU_FOUR?a=4:t==CardsType.NIU_FIVE?a=5:t==CardsType.NIU_SIX?a=6:t==CardsType.NIU_SEVEN?a=7:t==CardsType.NIU_EIGHT?a=8:t==CardsType.NIU_NINE?a=9:t==CardsType.NIU_TEN?a=10:t==CardsType.NIU_WUHUA?a=11:t==CardsType.NIU_BOMO?a=12:t==CardsType.NO_NIU&&(a=0),-1!=a&&this._playSound(e,a)},e.prototype._playSound=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=0);var a;-1!=t&&(a=e?"M_niu_"+t:"F_niu_"+t,this._playerSound.playSound(a))},e.prototype.playMessageSound=function(e,t){var a;"-1"!=t&&(a=e?"m_"+t:"f_"+t,this._playerSound.playSound(a,1,1))},e.prototype.playButtonSound=function(e){this._playerSound.playSound(e)},e.prototype.gameSound=function(e){this._playerSound.playSound(e)},e}();__reflect(PlayerSoundManager.prototype,"PlayerSoundManager");var SceneManager=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.getInstance=function(){return null==this.ins&&(this.ins=new t),this.ins},Object.defineProperty(t.prototype,"parentView",{get:function(){return this._parentView},set:function(e){this._parentView=e},enumerable:!0,configurable:!0}),t.prototype.removeView=function(){null!=this.parentView&&this.parentView.removeChildren()},t.prototype.addView=function(e,a){this.removeView(),e==t.LOGIN_NAME?this.parentView.addChild(new LoginView(a)):e==t.HALL_NAME||e==t.GAMEROOM_NAME&&this.parentView.addChild(new GameRoomView(a))},t.LOGIN_NAME="loginView",t.HALL_NAME="hallView",t.GAMEROOM_NAME="gameRoomView",t}(eui.Component);__reflect(SceneManager.prototype,"SceneManager");var SoundManager=function(){function e(){this.type=0,this.musicVolume=0,this.soundVolume=1}return e.prototype.setMusicVolume=function(){null!=this._music_channel&&(this._music_channel.volume=this.musicVolume)},e.prototype.setSoundVolume=function(){null!=this._channel&&(this._channel.volume=this.soundVolume)},e.prototype.playMusic=function(t){e.getInstance().stopMusic(),this._music_sound=RES.getRes(t+"_mp3"),null!=this._music_sound&&(this._music_channel=this._music_sound.play(0,-1),this._music_channel.volume=this.musicVolume)},e.prototype.stopMusic=function(){null!=this._music_sound&&(this._music_sound=null),null!=this._music_channel&&this._music_channel.stop()},e.prototype.playSound=function(e,t,a){void 0===t&&(t=1),void 0===a&&(a=0),this.type=a,PlayerManager.isHidden||this._plays(e,t)},e.prototype._plays=function(t,a){if(e.getInstance().stopSound(),null==RES.getRes(t+"_mp3"))this.getPlaySounds(t,a);else{var n=RES.getRes(t+"_mp3");if(null==n)return;var i=n.play(0,1);1==this.type&&i.once(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),i.volume=e.getInstance().soundVolume}},e.prototype.getPlaySounds=function(e,t){RES.getResAsync(e+"_mp3",this.loadSound,this)},e.prototype.loadSound=function(t,a){var n=RES.getRes(a);if(null!=n){var i=n.play(0,1);i.volume=e.getInstance().soundVolume,1==this.type&&i.once(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this)}},e.prototype.playSounds=function(e,t){RES.getResAsync(e+"_mp3",this.loadMusic,this)},e.prototype.loadMusic=function(e,t){this._soundmain=RES.getRes(t),this.plays()},e.prototype.plays=function(){null!=this._soundmain&&(this._channel=this._soundmain.play(0,1),this._channel.volume=this.soundVolume,1==this.type&&(e.soundisover=!0,this._channel.once(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this)))},e.prototype.onSoundComplete=function(){e.soundisover=!0},e.prototype.stopSound=function(){null!=this._soundmain&&(this._soundmain=null),null!=this._channel&&this._channel.stop()},e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.musicOpen=!0,e.soundOpen=!0,e.isloadok=!1,e.soundisover=!0,e}();__reflect(SoundManager.prototype,"SoundManager");var TipsManager=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.getInStance=function(){return null==this.ins&&(this.ins=new t),this.ins},t}(eui.Component);__reflect(TipsManager.prototype,"TipsManager");var VoiceListManager=function(){function e(){}return e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},e}();__reflect(VoiceListManager.prototype,"VoiceListManager");var Configs=function(){function e(){}return e.backTohall=function(){egret.Capabilities.isMobile},e.version="10.0.2",e.commonMessage=[{message:"快点儿吧，我等得花儿都谢了",type:1,sound:2},{message:"辛辛苦苦几十年，一把回到解放前！",type:1,sound:3},{message:"你这牌打得也太好了",type:1,sound:4},{message:"炸的好",type:1,sound:5},{message:"不好意思啊，我稍微离开一下",type:1,sound:6},{message:"搏一搏，单车变摩托",type:1,sound:7},{message:"和你玩牌，友谊的小船说翻就翻",type:1,sound:8},{message:"这咋又断线了，网络真的太差!",type:1,sound:9},{message:"大家好，很高兴见到各位",type:1,sound:10},{message:"不怕神一样的对手，就怕猪一样的队友",type:1,sound:11},{message:"和你合作真实太愉快了",type:1,sound:12},{message:"再见了，我会想念大家的",type:1,sound:13}],e}();__reflect(Configs.prototype,"Configs");var Utils=function(){function e(){}return e.getWindowInfo=function(){for(var e=document.location.href,t=e.split("?"),a=t[1].split("&"),n={},i=0;i<a.length;i++){var r=a[i].split("=")[0],o=a[i].split("=")[1];n[r]=o}return console.log(n),n},e.getGold=function(e){var t="",a=Math.abs(e),n="";return 0>e&&(n="-"),t=a/1e4+"",a>=1e9?n+t.slice(0,6)+"万":a>=1e8?n+t.slice(0,5)+"万":a>=1e7?n+t.slice(0,6)+"万":a>=1e4?n+t.slice(0,5)+"万":n+a+""},e.sortOnCardNoByAse=function(e,t){var a=e.serialNo,n=t.serialNo;return a>n?1:n>a?-1:0},e.sortOnCardNoByDesc=function(e,t){var a=e.serialNo,n=t.serialNo;return n>a?1:a>n?-1:0},e.sortOnPlayerByTimeStamp=function(e,t){var a=e.localSeatNo,n=t.localSeatNo;return n>a?-1:a>n?1:0},e.calcuteDate=function(e){function t(e){var t=new Array,n=new Date(e),i=n.getFullYear(),r=n.getMonth()+1,o=n.getDate(),s=n.getHours(),c=n.getMinutes(),l=n.getSeconds(),h=n.getDay();return h=0==h?7:h,t.push(i),t.push(a(r,2)),t.push(a(o,2)),t.push(a(s,2)),t.push(a(c,2)),t.push(a(l,2)),t.push(h),t}function a(e,t){for(var a=""+e,n=a.length,i="",r=t;r-->n;)i+="0";return i+a}var n=t(e);return n},e.getCardTypeNameByCardType=function(e){var t="";switch(e){case 2:t="没牛";break;case 3:t="牛一";break;case 4:t="牛二";break;case 5:t="牛三";break;case 6:t="牛四";break;case 7:t="牛五";break;case 8:t="牛六";break;case 9:t="牛七";break;case 10:t="牛八";break;case 11:t="牛九";break;case 22:t="牛牛";break;case 44:t="五花牛";break;case 88:t="炸弹";break;default:t=""}return t},e.getRoundByRoomType=function(e){switch(e){case 1:return 10;case 2:return 20;case 3:return 30}return 0},e.getCardNumByNetCard=function(e){var t=0;switch(e){case 1:t=0;break;case 2:t=1;break;case 3:t=2;break;case 4:t=3;break;case 8:t=4;break;case 9:t=5;break;case 10:t=6;break;case 11:t=7;break;case 15:t=8;break;case 16:t=9;break;case 17:t=10;break;case 18:t=11;break;case 22:t=12;break;case 23:t=13;break;case 24:t=14;break;case 25:t=15;break;case 29:t=16;break;case 30:t=17;break;case 31:t=18;break;case 32:t=19;break;case 36:t=20;break;case 37:t=21;break;case 38:t=22;break;case 39:t=23;break;case 43:t=24;break;case 44:t=25;break;case 45:t=26;break;case 46:t=27;break;case 50:t=28;break;case 51:t=29;break;case 52:t=30;break;case 53:t=31;break;case 57:t=32;break;case 58:t=33;break;case 59:t=34;break;case 60:t=35;break;case 64:t=36;break;case 65:t=37;break;case 66:t=38;break;case 67:t=39;break;case 71:t=40;break;case 72:t=41;break;case 73:t=42;break;case 74:t=43;break;case 78:t=44;break;case 79:t=45;break;case 80:t=46;break;case 81:t=47;break;case 85:t=48;break;case 86:t=49;break;case 87:t=50;break;case 88:t=51}return t},e}();__reflect(Utils.prototype,"Utils");var UtilsTween=function(){function e(){}return e.to=function(e,t,a,n){var i=egret.Tween.get(e);i.to(a,t,n)},e.fromTo=function(e,t,a,n,i){var r=egret.Tween.get(e);r.to(a);var o=egret.Tween.get(e);o.to(n,t,i)},e.tweens=function(e,t,a,n,i,r){egret.Tween.get(e).to(a,0).to(n,t,i).wait(r)},e}();__reflect(UtilsTween.prototype,"UtilsTween");var CardTest=function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.list=[t.SEND_CARD],a}return __extends(t,e),t.dispatchEvt=function(e,a){console.log("派发事件："+e+"，msg："+JSON.stringify(a)),t.getInstance().dispatchEventWith(e,!1,a)},t.addEvt=function(e,a,n){t.getInstance().addEventListener(e,a,n)},t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.SEND_CARD="SEND_CARD",t}(egret.EventDispatcher);__reflect(CardTest.prototype,"CardTest");var XmlParse=function(){function e(){}return e.getAddress=function(){for(var e=0;e<Configs.xml.children.length;e++){var t=Configs.xml.children[e];"singAddress"==t.name?Configs.singAdress=t.$singAddress:"logoAdress"==t.name?Configs.logoAdress=t.$logoAdress:"hallAdress"==t.name?Configs.hallAdress=t.$hallAdress:"linkAddress"==t.name?Configs.linkAddress=t.$linkAddress:"websocketIP"==t.name?Configs.ip=t.$websocketIP:"websocketPort"==t.name&&(Configs.port=t.$websocketPort)}},e}();__reflect(XmlParse.prototype,"XmlParse");var BigEndScoreView=function(e){function t(t){var a=e.call(this)||this;return a.data=t,a.addEventListener(eui.UIEvent.COMPLETE,a.init,a),a.skinName=BigEndScoreSkin,a}return __extends(t,e),t.prototype.init=function(){var e=this;RES.getResAsync("totalScoreBg_png",function(){e.bg.source="totalScoreBg_png"},this),this.setBigEndTotalScore(this.data),this.shareBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.shareTotalScore,this),this.backHomeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backHome,this),this.roomId.text="房间号："+PlayerManager.roomId,this.gameRound.text="轮数："+PlayerManager.totalRound},t.prototype.backHome=function(){this.parent.backRoom()},t.prototype.shareTotalScore=function(){null==this.shareTop&&(this.shareTop=new ShareTopView),this.addChild(this.shareTop),this.shareTop.show(3);for(var e=PlayerInfoCache.getInstance().getMe(),t="",a=0,n=0;n<this.data.length;n++)t+=this.data[n].nickName+":"+this.data[n].totalScore+",",this.data[n].nickName==e.nickName&&(a=parseInt(this.data[n].totalScore));t=a>=0?e.nickName+"在三张牌游戏中赢了"+a+"分，很不错，你想一起玩吗？":e.nickName+"在三张牌游戏中输了"+Math.abs(a)+"分，很不错，你想一起玩吗？",IframeManager.getInstance().initWxShare("三张牌",t)},t.prototype.setBigEndTotalScore=function(e){this.totalSocreList.dataProvider=new eui.ArrayCollection(e),this.totalSocreList.itemRenderer=BigSinEndScoreView},t}(eui.Component);__reflect(BigEndScoreView.prototype,"BigEndScoreView");var BigSinEndScoreView=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/skin/View/BigSinEndScoreSkin.exml",t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.initPlayerInfo(e),this.initRound(e),this.initTotalScore(e)},t.prototype.initTotalScore=function(e){var t=parseInt(e.totalScore);t>0?(this.totalScore.text="+"+t,this.totalScore.textColor=14259211):(this.totalScore.text=t.toString(),this.totalScore.textColor=16777215)},t.prototype.initRound=function(e){var t=this.totalGroup,a=t.getChildByName("roundWin");a.text=e.roundWin},t.prototype.initPlayerInfo=function(e){var t=this.totalGroup,a=t.getChildByName("headImg");a.source=e.headImageUrl,a.mask=this.headMask;var n=t.getChildByName("nickName");n.text=e.nickName;var i=parseInt(e.rank),r=t.getChildByName("rank");i>0&&4>i&&1==i&&(r.visible=!0)},t}(eui.ItemRenderer);__reflect(BigSinEndScoreView.prototype,"BigSinEndScoreView");var CardBigView=function(e){function t(t){var a=e.call(this)||this;return a.suits=[2,1,3,0],a.showType=0,a.card=t,a.touchEnabled=!0,a.addEventListener(egret.Event.COMPLETE,a.uiCompHandler,a),a.addEventListener(egret.Event.REMOVED_FROM_STAGE,a.onDestory,a),a.skinName=CardBigViewSkin,a}return __extends(t,e),t.prototype.onDestory=function(){this.dragonGroup.removeEventListener("DragonBonesComplete",this.onturnCard,this),this.removeEventListener(egret.Event.COMPLETE,this.uiCompHandler,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDestory,this)},t.prototype.onturnCard=function(){this.showType=1,this.showInit(this.card,this.showType)},t.prototype.uiCompHandler=function(){this.dragonGroup.addEventListener("DragonBonesComplete",this.onturnCard,this),this.showInit(this.card,this.showType)},t.prototype.showCardValue=function(e){void 0===e&&(e=!1),this.card.suit>=0&&this.card.suit<4?(this.cardNum.visible=!0,this.cardBigSuit.visible=!0,this.cardSmallSuit.visible=!0,this.cardNum.source=this.getNumSource(this.card.value,this.suits[this.card.suit]),this.cardBigSuit.source=this.getSuitSouse(this.suits[this.card.suit],!0,this.card.value+2),this.cardSmallSuit.source=this.getSuitSouse(this.suits[this.card.suit],!1,this.card.value+2)):4==this.card.suit||5==this.card.suit,this.bg.visible=!0},t.prototype.showAction=function(){var e=this,t=egret.Tween.get(this);t.to({scaleX:0},500).call(function(){e.cardBg.visible=!1}).to({scaleX:1},500)},t.prototype.turnCard=function(e){this.card=e,this.init(),DragonBonesManager.getInstance().startDragon(this.dragonGroup,"turnCard","turnCard","turnCard","turnCard","Armature","cardTurn",50,40,1,1.5,!1,1,1)},t.prototype.init=function(){this.bg.touchEnabled=!1,this.cardBigSuit.touchEnabled=!1,this.cardSmallSuit.touchEnabled=!1,this.cardNum.touchEnabled=!1,this.cardBg.touchEnabled=!0,this.cardBigSuit.visible=!1,this.cardSmallSuit.visible=!1,this.cardNum.visible=!1,this.cardBg.visible=!1,this.bg.visible=!1},t.prototype.initCardData=function(e,t){void 0===t&&(t=0),this.showInit(e,t)},t.prototype.showInit=function(e,t){void 0===t&&(t=0),this.showType=t,this.card=e,0==this.showType?(this.init(),this.cardBg.visible=!0):this.cardBg.visible=!1,this.showCardValue()},t.prototype.getSuitSouse=function(e,t,a){void 0===t&&(t=!0),void 0===a&&(a=-1);var n="";if(t)if(a>10&&14>a)switch(e){case 0:n+="suit_3_"+a+"_png";break;case 1:n+="suit_1_"+a+"_png";break;case 2:n+="suit_0_"+a+"_png";break;case 3:n+="suit_2_"+a+"_png"}else switch(e){case 0:n+="suit_3_big_png";break;case 1:n+="suit_1_big_png";break;case 2:n+="suit_0_big_png";break;case 3:n+="suit_2_big_png"}else switch(e){case 0:n+="suit_3_small_png";break;case 1:n+="suit_1_small_png";break;case 2:n+="suit_0_small_png";break;case 3:n+="suit_2_small_png"}return n},t.prototype.getNumSource=function(e,t){var a="";switch(a+=this.suits[this.card.suit]>=2?"red_":"black_",e){case 12:a+="1_png";break;case 0:a+="2_png";break;case 1:a+="3_png";break;case 2:a+="4_png";break;case 3:a+="5_png";break;case 4:a+="6_png";break;case 5:a+="7_png";break;case 6:a+="8_png";break;case 7:a+="9_png";break;case 8:a+="10_png";break;case 9:a+="11_png";break;case 10:a+="12_png";break;case 11:a+="13_png"}return a},t}(eui.Component);__reflect(CardBigView.prototype,"CardBigView");var CardSmallView=function(e){function t(t){var a=e.call(this)||this;return a.suits=[2,1,3,0],a.showType=0,a.card=t,a.addEventListener(egret.Event.COMPLETE,a.uiCompHandler,a),a.addEventListener(egret.Event.REMOVED_FROM_STAGE,a.onDestory,a),a.skinName=CardSmallViewSkin,a}return __extends(t,e),t.prototype.onturnCard=function(){this.showType=1,this.showInit(this.card,this.showType)},t.prototype.onDestory=function(){this.removeEventListener("DragonBonesComplete",this.onturnCard,this),this.removeEventListener(egret.Event.COMPLETE,this.uiCompHandler,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDestory,this),this.dragonGroup.removeEventListener("DragonBonesComplete",this.onturnCard,this)},t.prototype.uiCompHandler=function(){this.addEventListener("DragonBonesComplete",this.onturnCard,this),this.showInit(this.card,this.showType),this.dragonGroup.addEventListener("DragonBonesComplete",this.onturnCard,this)},t.prototype.showCardValue=function(){this.card.suit>=0&&this.card.suit<4?(this.cardNum.visible=!0,this.cardSmallSuit.visible=!0,this.cardSmallSuit1.visible=!0,this.cardNum.source=this.getNumSource(this.card.value,this.suits[this.card.suit]),this.cardSmallSuit1.source=this.getSuitSouse(this.suits[this.card.suit],!0,this.card.value+2),this.cardSmallSuit.source=this.getSuitSouse(this.suits[this.card.suit],!1,this.card.value+2)):4==this.card.suit||5==this.card.suit,this.bg.visible=!0},t.prototype.turnCard=function(e){this.card=e,this.init(),DragonBonesManager.getInstance().startDragon(this.dragonGroup,"turnCard","turnCard","turnCard","turnCard","Armature","cardTurn",0,0,1,1.5,!1,.53,.54)},t.prototype.init=function(){this.bg.touchEnabled=!1,this.cardSmallSuit.touchEnabled=!1,this.cardSmallSuit1.touchEnabled=!1,this.cardNum.touchEnabled=!1,this.cardBg.touchEnabled=!1,this.cardSmallSuit.visible=!1,this.cardSmallSuit1.visible=!1,this.cardNum.visible=!1,this.cardBg.visible=!1,this.bg.visible=!1},t.prototype.initCardData=function(e,t){void 0===t&&(t=0),this.card=e,this.showInit(this.card,t)},t.prototype.showInit=function(e,t){void 0===t&&(t=0),this.showType=t,this.card=e,0==this.showType?(this.init(),this.cardBg.visible=!0):this.cardBg.visible=!1,this.showCardValue()},t.prototype.getSuitSouse=function(e,t,a){void 0===t&&(t=!0),void 0===a&&(a=-1);var n="";if(t)if(a>10&&14>a)switch(e){case 0:n+="suit_3_"+a+"_png";break;case 1:n+="suit_1_"+a+"_png";break;case 2:n+="suit_0_"+a+"_png";break;case 3:n+="suit_2_"+a+"_png"}else switch(e){case 0:n+="suit_3_big_png";break;case 1:n+="suit_1_big_png";break;case 2:n+="suit_0_big_png";break;case 3:n+="suit_2_big_png"}else switch(e){case 0:n+="suit_3_small_png";break;case 1:n+="suit_1_small_png";break;case 2:n+="suit_0_small_png";break;case 3:n+="suit_2_small_png"}return n},t.prototype.getNumSource=function(e,t){var a="";switch(a+=this.suits[this.card.suit]>=2?"red_":"black_",e){case 12:a+="1_png";break;case 0:a+="2_png";break;case 1:a+="3_png";break;case 2:a+="4_png";break;case 3:a+="5_png";break;case 4:a+="6_png";break;case 5:a+="7_png";break;case 6:a+="8_png";break;case 7:a+="9_png";break;case 8:a+="10_png";break;case 9:a+="11_png";break;case 10:a+="12_png";break;case 11:a+="13_png"}return a},t}(eui.Component);__reflect(CardSmallView.prototype,"CardSmallView");var ChatUiView=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/skin/View/ChatUiSkin.exml",t.addEventListener(eui.UIEvent.CREATION_COMPLETE,t.init,t),t}return __extends(t,e),t.prototype.init=function(){},t.prototype.showChat=function(e,t,a){var n=this;if(this.chatGroup.visible=!0,-1!=e.indexOf("face")&&e.length<8){this.chatBg.visible=!1,this.chatBg23.visible=!1,this.chatText.text="",this.chatText23.text="";var i=void 0;i=12>a&&a>5?this.chatGifGroup:this.chatGifGroup23,DragonBonesManager.getInstance().startDragon(i,"face","face","face","face",e,"newAnimation",30,110,1,1,!1)}else{var r=e.split("_");this.chatBg.visible=!0,a>0&&6>a?(this.chatText23.text="",this.chatText23.text=r[0],this.chatText.visible=!1,this.chatText23.visible=!0):(this.chatText.text="",this.chatText.text=r[0],this.chatText.visible=!0,this.chatText23.visible=!1),PlayerSoundManager.getInstance().playMessageSound(t,r[1])}var o=egret.Tween.get(this.chatGroup);o.wait(2e3).to({visible:!1}).call(function(){egret.Tween.removeTweens(n.chatGroup)})},t}(eui.Component);__reflect(ChatUiView.prototype,"ChatUiView");var ChatView=function(e){function t(){var t=e.call(this)||this;return t.ChatTextAry=[],t.ChatFaceAry=[],t.skinName="resource/skin/View/ChatViewSkin.exml",t.addEventListener(eui.UIEvent.CREATION_COMPLETE,t.init,t),t}return __extends(t,e),t.prototype.init=function(){for(var e=1;18>e;e++)this["text"+e].name=e,this["text"+e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.SendChatTextFun,this),this.ChatTextAry.push(this["text"+e]);for(var t=1;21>t;t++)this["face"+t].name=t,this["face"+t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.SendChatFaceFun,this),this.ChatFaceAry.push(this["face"+t]);this.initClickFuc()},t.prototype.SendChatTextFun=function(e){var t=PlayerInfoCache.getInstance().getMe(),a={cmd:"271250",msg:this.ChatTextAry[e.target.name-1].text+"_chat"+e.target.name,seatId:t.seatNo,type:"1"};WebsocketEngine.getInstance().sendData(a),this.closeChat()},t.prototype.SendChatFaceFun=function(e){var t=PlayerInfoCache.getInstance().getMe(),a={cmd:"271250",msg:"face"+e.target.name,seatId:t.seatNo,type:"1"};WebsocketEngine.getInstance().sendData(a),this.closeChat()},t.prototype.initClickFuc=function(){this.textBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickText,this),this.faceBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickFace,this),this.chatRect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeChat,this)},t.prototype.clickText=function(){this.textScroller.visible=!0,this.faceScroller.visible=!1,this.faceBg.visible=!1},t.prototype.clickFace=function(){var e=this;RES.getResAsync("face_json",function(){e.textScroller.visible=!1,e.faceScroller.visible=!0,e.faceBg.visible=!0},this)},t.prototype.closeChat=function(){this.parent.hideChatView()},t}(eui.Component);__reflect(ChatView.prototype,"ChatView");var ChipSliderView=function(e){function t(){var t=e.call(this)||this;return t.vSliderValue=0,t.addEventListener(eui.UIEvent.COMPLETE,t.init,t),t.skinName=ChipSlider,t}return __extends(t,e),t.prototype.init=function(){this.vSlider.addEventListener(eui.UIEvent.CHANGE,this.changeHandler,this),this.close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeView,this),this.addSure.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sureAddInject,this)},t.prototype.closeView=function(){this.parent.closeChipSlider()},t.prototype.sureAddInject=function(){var e={cmd:271170,fillScore:this.vSliderValue,roleId:PlayerManager.id};WebsocketEngine.getInstance().sendData(e),this.visible=!1,this.closeView(),1!=PlayerManager.gameType||PlayerManager.lookCard||(PlayerManager.isCanLookCard=!0)},t.prototype.setVsliderValue=function(e,t,a){var n=this.vSlider.getChildAt(3);this.vSlider.value=e,this.vSlider.minimum=t,this.vSlider.maximum=a,n.text=""+t,this.vSliderValue=e},t.prototype.changeHandler=function(e){var t=this.vSlider.getChildAt(3);t.text=e.target.value,this.vSliderValue=e.target.value},t}(eui.Component);__reflect(ChipSliderView.prototype,"ChipSliderView");var CirTime=function(e){function t(){var t=e.call(this)||this;return t.cirtimer=new egret.Timer(10),t.angle=0,t.cirX=0,t.cirY=0,t.addEventListener(eui.UIEvent.COMPLETE,t.init,t),t.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,t.onRemoved,t),t.skinName=TimeCir,t}return __extends(t,e),t.prototype.init=function(){this.cirtimer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.addEventListener(eui.UIEvent.COMPLETE,this.init,this),this.addEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.onRemoved,this)},t.prototype.onRemoved=function(){this.cirtimer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.removeEventListener(eui.UIEvent.COMPLETE,this.init,this),this.removeEventListener(eui.UIEvent.REMOVED_FROM_STAGE,this.onRemoved,this)},t.prototype.hideView=function(){this.visible=!1,this.cirtimer.stop(),this.cirtimer.reset(),this.angle=0},t.prototype.cirTimer=function(e,t){this.cirX=e,this.cirY=t,this.angle=0,this.visible=!0,this.shape=null,this.shape1=null,this.cirGroup.removeChildren(),this.cirtimer.start()},t.prototype.onTimer=function(){null==this.shape&&(this.shape=new egret.Shape,this.cirGroup.addChild(this.shape));var e=this.shape;e.graphics.clear(),this.angle+=.48,this.angle>=360&&(this.cirtimer.stop(),this.angle=0),e.graphics.clear(),e.graphics.lineStyle(6,65280,1),e.graphics.drawArc(this.cirX,this.cirY+1,45,0,this.angle*Math.PI/180,!1),e.graphics.endFill()},t}(eui.Component);__reflect(CirTime.prototype,"CirTime");var GameRoomView=function(e){function t(t){void 0===t&&(t=0);var a=e.call(this)||this;return a.t=0,a.cardMoveEndX=0,a.cardMoveEndY=0,a.cardMoveStartX=0,a.cardMoveStartY=0,a.sendNum=0,a.playVoiceSeat=0,a.continueTimer=new egret.Timer(1e3),a.leftTime=5,a.actionVs=!1,a.chooseVsPlayerArr=[],a.isBoo=!0,a.clicktag=0,a.initAllPlayerBgCardDone=!1,a.chipMoveStartX=0,a.chipMoveStartY=0,a.chipList=[1,5,10,20,50,100],a.skinName="resource/skin/View/GameRoomViewSkin.exml",a}return __extends(t,e),t.prototype.addStage=function(){IframeManager.getInstance().sendUILoadFinish();var e=egret.localStorage.getItem("isMusicVol_six"),t=egret.localStorage.getItem("isSoundVol_six");console.log("bgSet:"+e+",efSet:"+t),e&&(SoundManager.getInstance().musicVolume="1"==e?1:0),t&&(SoundManager.getInstance().soundVolume="1"==t?1:0),PlayerManager.gameMusicOn=1==SoundManager.getInstance().musicVolume?!0:!1,PlayerManager.gameEffectOn=1==SoundManager.getInstance().soundVolume?!0:!1,this.player=PlayerInfoCache.getInstance().getMe(),null==this.cirTime&&(this.cirTime=new CirTime),this.addChild(this.cirTime),this.cirTime.visible=!1,this.initCacheInfo(),this.initClickFuc(),WebsocketEngine.getInstance().addEventListener(NetEvent.RECEVICEMESSAGE,this.onWebSocketReceive,this)},t.prototype.onWebSocketReceive=function(e){var t=e.data;this.updateCacheView(t)},t.prototype.initCacheInfo=function(){var e=PlayerInfoCache.getInstance().commandCache;if(null!=e)for(var t=e.length,a=0;t>a;a++){var n=e[a];this.updateCacheView(n)}},t.prototype.initClickFuc=function(){this.turnCardRect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sendCard,this),this.addInjectBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sendGetInjectNums,this),this.startBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickRoomStart,this),this.followInjectBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickFollowInject,this),this.followInjectBtn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickFollowInject1,this);for(var e=1;7>e;e++)this["player"+e].addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickLocal,this);for(var t=1;6>t;t++)this["VSRect"+t].addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickOtherPlayerVsCard,this);this.menuBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showMenu,this),this.CancelInjectBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.cancelInject,this),this.chatBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showChatView,this),this.VSInjectBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sendVs,this),this.chooseVsRect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.hideAllVSRect,this),this.recordBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showRecordView,this),this.fallowMove.addEventListener(egret.Event.COMPLETE,this.onTweenGroupComplete,this),this.seatDownBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var e={cmd:"271006",seat:-1,roleId:PlayerManager.id,roomId:PlayerManager.roomId};WebsocketEngine.getInstance().sendData(e)},this),PlayerManager.isHidden||("iOS"==egret.Capabilities.os?this.stage.once(egret.TouchEvent.TOUCH_TAP,this.onClick,this):this.onClick()),IframeManager.getInstance().addEventListener(NetConstant.OFFLINE,this.breakGame,this)},t.prototype.updateCacheView=function(e){var t=this;console.log("updateCacheView",e);var a=e,n=parseInt(a.cmd);switch(null!=a.errorCode&&(n=parseInt(a.errorCode)),n){case 271006:PlayerManager.seatDown=!0;var i=a.player;this.initPlayerInfo(i,a.seatId,a.score);var r=PlayerInfoCache.getInstance().getPlayerSize();PlayerManager.isTotalGameStart?2>r&&this.setOwn(parseInt(a.owerRoleId)):this.setOwn(parseInt(a.owerRoleId)),this.chatGroup.visible=!0,this.gameStartBtnGroup.visible=!0,this.seatDownBtn.visible=!1,this.setSeatDownBtnVisible(),this.setBankerReadImg(PlayerManager.id);break;case 2710063:this.showSeatDownErrorTips(4);break;case 271067:this.setPlayerReady(a);break;case 2710671:this.readyError();break;case 271111:this.initSeatPlayer(a.seat);break;case 271104:this.delBackPlayer(a);break;case 271116:var o=a.player;this.initPlayerInfo(o,a.seatId,a.score);var s=PlayerInfoCache.getInstance().getPlayerSize();PlayerManager.isTotalGameStart?2>s&&this.setOwn(parseInt(a.owerRoleId)):this.setOwn(parseInt(a.owerRoleId)),this.setBankerReadImg(o.roleId);break;case 271004:this.initSeatPlayer(a.room.seatInfo);break;case 271125:null!=this.smallScore&&(this.smallScore.visible=!1),this.gameStart(a);break;case 271081:alert("透视开始"),this.perspectiveStart(a);break;case 271163:this.turnCard(a);break;case 271190:this.updateOtherCardTips(a.seat);break;case 271180:this.otherFollowInject(a);break;case 271181:this.actionTurnCard(a);break;case 271065:RES.getResAsync("fallowForever_json",function(){t.showFallowInject(a)},this);break;case 271170:this.showPlayerAddInject(a);break;case 271210:this.playerCancelInject(a);break;case 271164:this.chooseVsPlayer(a);break;case 271230:PlayerManager.VsPlayerArr=[],this.showPlayerVSCard(a);break;case 271240:RES.loadGroup("totalScore"),PlayerManager.isResetSeat=!1,egret.Tween.get(this).wait(1500).call(function(){t.actionTurnCard(a)}),this.showSmallTotalScore(a);break;case 271126:this.continueGame();break;case 271250:RES.loadGroup("faceMsg"),this.showChat(a);break;case 271131:RES.loadGroup("faceMsg"),this.ownShowChat(a);break;case 271080:RES.getResAsync("record_json",function(){t.showLookPlayer(a)},this);break;case 271001:if(this.saveGameData(a),this.initOwnPlayer(a.player),this.initGameInfo(),this.breakLine(a),PlayerManager.isTotalGameStart){this.startDrgonGroup.visible=!1,this.startDrgonGroup.removeChildren();PlayerInfoCache.getInstance().getPlayerSize();PlayerManager.isGameStart||this.setOwn(parseInt(a.owerRoleId))}else this.setOwn(parseInt(a.owerRoleId)),this.playAaction("kaishi");this.initRoomInfo(),this.recoverDissolve(a),PlayerManager.isGameStart&&this.hideAllReadyImg(),this.setSeatDownBtnVisible(),PlayerManager.initWxShare();break;case 2710010:var c={};c.loadType=1,c.message="游戏已经结束,返回大厅重新开局吧!",c.okFun=this.backRoom,c.titleType=1,TipsManager.getInStance().dispatchEvent(new StageEvent(StageEvent.VIEW_TIPS,c));break;case 271233:var l={};l.loadType=1,l.message="游戏已经结束,返回大厅重新开局吧!",l.okFun=this.backRoom,l.titleType=1,TipsManager.getInStance().dispatchEvent(new StageEvent(StageEvent.VIEW_TIPS,l));break;case 2711252:this.showStartErrorTips(1);break;case 2711250:this.showStartErrorTips(2);break;case 271129:this.upDateBreakLineInfo(a);break;case 271009:PlayerManager.dissolveTime=15e3,this.showPlayerDissolveGame(a);break;case 271010:this.showAgreeDissolveNum(a);break;case 271012:this.showDissolveNumOk();break;case 271016:this.playerStandUp(a);var h=PlayerInfoCache.getInstance().getPlayerSize();PlayerManager.isTotalGameStart?(!PlayerManager.isGameStart||2>h)&&this.setOwn(parseInt(a.owerRoleId)):this.setOwn(parseInt(a.owerRoleId));break;case 271060:this.showLastGameView(a);break;case 271061:this.showTotalGameView(a);break;case 271029:this.gameStartJoin(a);break;case 271037:PlayerManager.isResetSeat=!0,PlayerManager.isCanLookCard=!1,this.gameStartedSeatDown(a,!0),this.InjectBtnGroup.visible=!1,this.chatGroup.visible=!0;break;case 271087:RES.getResAsync("playWay_json",function(){t.showPlayerInfo(a)},this);break;case 271090:this.setOwn(parseInt(a.owerId)),this.setOwnReady(a);break;case 2710060:this.showSeatDownErrorTips(1);break;case 2710061:this.showSeatDownErrorTips(5);break;case 2710062:this.showSeatDownErrorTips(2);break;case 2710162:this.showSeatDownErrorTips(3);default:return}},t.prototype.perspectiveStart=function(e){var t=this;this.t=setTimeout(function(){t.initAllPlayerBgCardDone?t.perspective(e):(clearTimeout(t.t),t.perspectiveStart(e))},1e3)},t.prototype.playAaction=function(e){var t=this.startDrgonGroup.getChildByName("state");null!=t&&(t.dispose(),t.parent&&t.parent.removeChild(t)),DragonBonesManager.getInstance().playDragon(this.startDrgonGroup,"game",e,"newAnimation",{dx:100,dy:0,timeScale:1,playTimes:0,names:"state"})},t.prototype.setSeatDownBtnVisible=function(){var e=PlayerInfoCache.getInstance().getPlayerSize();!PlayerManager.seatDown&&PlayerManager.isGameState<2&&6>e?this.seatDownBtn.visible=!0:this.seatDownBtn.visible=!1},t.prototype.hidePlayerHead=function(){for(var e=1;7>e;e++){var t=PlayerInfoCache.getInstance().getPlayerByLocalSeatno(e);null==t&&(this["player"+e].visible=!1)}},t.prototype.initPlayerInfo=function(e,t,a,n,i){void 0===n&&(n=!1);var r=new PlayerVo;r.headImageUrl=e.headImgUrl,r.id=e.roleId,r.nickName=e.nickname,r.seatNo=t,"1"==e.sex?r.sex=!0:r.sex=!1,r.gold=e.gold,r.score=a,r.isReady=i,r.isGameingSeatDown=n,null==this.player&&(this.player=PlayerInfoCache.getInstance().getMe()),this.player.id==r.id&&(r.isMine=!0),PlayerInfoCache.getInstance().addPlayer(r),PlayerInfoCache.getInstance().initPlayerLocalSeatNo(),this.getAllPlayer(),PlayerManager.isGameStart&&this.hideAllReadyImg()
},t.prototype.getAllPlayer=function(){for(var e=1;7>e;e++){var t=PlayerInfoCache.getInstance().getPlayerByLocalSeatno(e);this.hidePlayer(e),this.initPlayer(t)}},t.prototype.hidePlayer=function(e){this["player"+e].hidePlayerInfo(),PlayerManager.seatDown?this["player"+e].name="yaoqing":this["player"+e].name=""},t.prototype.initPlayer=function(e){null!=e&&0!=e.seatNo&&(this["player"+e.localSeatNo].showReadImg(e.localSeatNo,e.isReady),this["player"+e.localSeatNo].setPlayerInfo(e),this["player"+e.localSeatNo].visible=!0,this["player"+e.localSeatNo].name="info")},t.prototype.initSeatPlayer=function(e){if(null!=e)for(var t=e.length,a=0;t>a;a++)this.initPlayerInfo(e[a].player,e[a].seatId,e[a].score,e[a].gameSitDowm,e[a].readySitDown)},t.prototype.playerCancelInject=function(e){var t=this;null!=this.cirTime&&this.cirTime.hideView();var a=parseInt(e.seat);if(PlayerManager.minAddInjectNum=parseInt(e.nextSeatfollowScore)+1,this.nextInjectPlayer(e.nextSeat,e.nextSeatfollowScore,e.isBiPai,e.nextCanLookCards),this.player.id==e.id){var n=egret.Tween.get(this.myCardGroup);n.to({y:450,alpha:0,scaleX:.5,scaleY:.5},300).to({y:1206}).wait(300).to({y:1008,alpha:1,scaleX:1,scaleY:1},300).call(function(){egret.Tween.removeTweens(t.myCardGroup)}),this.CancelInjectBtn.touchEnabled=!1,this.CancelInjectBtn.alpha=.5,this.fallowMoveGroup.visible=!1,this.fallowMove.stop(),this.myCardTypeGroup.visible=!0,this.myState.source="giveUpCardTips_png",this.myStateBg.visible=!0,this.myState.visible=!0,PlayerManager.GiveUpCard=!0,this.followInjectBtn1.alpha=.5,this.followInjectBtn1.touchEnabled=!1,PlayerSoundManager.getInstance().playMessageSound(this.player.sex,"giveup")}else{var i=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(a),r=this["otherCard"+i];this.otherGiveUpCardMove(r,i);var o=this["otherCardTips"+i];o.source="giveUpCardTips_png",o.visible=!0;var s=PlayerInfoCache.getInstance().getPlayerByLocalSeatno(i);PlayerSoundManager.getInstance().playMessageSound(s.sex,"giveup")}"0"!=e.isGameOver&&this.winnerChipMove(parseInt(e.winSeat))},t.prototype.turnCard=function(e){var t=this;PlayerManager.minAddInjectNum=parseInt(e.nextChipNum)+1;for(var a=e.handPai,n=Cards.getCardsForList(a,!0),i=this.otherCard6,r=n.length,o=0;r>o;o++){var s=i.getChildAt(o);s.turnCard(n[o])}this.turnCardRect.touchEnabled=!1,this.otherCardTips6.visible=!1,"1"==e.operation&&(this.followInjectBtn.label=e.nextChipNum.toString(),this.followInjectBtn.alpha=1,this.followInjectBtn.touchEnabled=!0,"1"==e.isBiPai&&(this.VSInjectBtn.alpha=1,this.VSInjectBtn.touchEnabled=!0)),PlayerManager.lookCard=!0,PlayerManager.isCanLookCard=!1,PlayerSoundManager.getInstance().playMessageSound(this.player.sex,"watch"),egret.Tween.get(this).wait(500).call(function(){t.initMyCardType(e.cardType)})},t.prototype.initMyCardType=function(e){var t=this,a=this.myCardType;return this.myCardTypeGroup.visible=!0,PlayerManager.VSCardLose||(this.myState.visible=!1,this.myStateBg.visible=!1),PlayerManager.GiveUpCard&&(this.myState.visible=!0,this.myStateBg.visible=!0),0>e||e>5?(a.visible=!1,void(this.myCardTypeBg.visible=!1)):void RES.getResAsync("type"+e+"_png",function(){a.source="type"+e+"_png",a.visible=!0,t.myCardTypeBg.visible=!0},this)},t.prototype.updateOtherCardTips=function(e){var t=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(e),a=PlayerInfoCache.getInstance().getPlayerByLocalSeatno(t);if(PlayerSoundManager.getInstance().playMessageSound(a.sex,"watch"),0!=t){var n=this["otherCardTips"+t];n.source="diajikanpaiyikanpai_png",n.visible=!0}},t.prototype.initAllPlayerBgCard=function(e){for(var t=this,a=1;7>a;a++){var n=PlayerInfoCache.getInstance().getPlayerByLocalSeatno(a);null==n||n.isGameingSeatDown||(null==this.player&&(this.player=PlayerInfoCache.getInstance().getMe()),this.player.id==n.id?(this.allSendCard(!0,e,6),this.playerChipNumGroup6.visible=!0):(this.allSendCard(!1,e,a),this["playerChipNumGroup"+a].visible=!0),PlayerSoundManager.getInstance().playButtonSound("dealcard"))}setTimeout(function(){t.initAllPlayerBgCardDone=!0},1e3)},t.prototype.allSendCard=function(e,t,a,n){switch(a){case 1:this.cardMoveStartX=-100,this.cardMoveStartY=-80;break;case 2:this.cardMoveStartX=-100,this.cardMoveStartY=220;break;case 3:this.cardMoveStartX=0,this.cardMoveStartY=515;break;case 4:this.cardMoveStartX=200,this.cardMoveStartY=220;break;case 5:this.cardMoveStartX=200,this.cardMoveStartY=-80;break;case 6:break;default:return}var i=[{flower:"0",number:"0"},{flower:"0",number:"0"},{flower:"0",number:"0"}];if(e||6==a){this.myCardGroup.visible=!0,1==PlayerManager.isCanLookCard&&(this.otherCardTips6.visible=!0,this.otherCardTips6.source="lookCardTips_png",this.turnCardRect.touchEnabled=!0),this.playerChipNumGroup6.visible=!0;for(var r=Cards.getCardsForList(i,!0),o=0;3>o;o++)this.initCardAction(r,o,t)}else for(var r=Cards.getCardsForList(i,!1),o=0;3>o;o++)this.initOtherPlayerCardAction(r,o,a,t)},t.prototype.initCardAction=function(e,t,a){var n=e[t].getCardUI(),i=egret.Tween.get(n);1==a?i.to({x:0,y:-200}).to({x:85*t,y:0}).call(function(){egret.Tween.removeTweens(n)}):i.to({x:0,y:-200}).to({x:85*t,y:0},150+100*t).call(function(){egret.Tween.removeTweens(n)}),this.otherCard6.addChild(n)},t.prototype.initOtherPlayerCardAction=function(e,t,a,n){var i=e[t].getCardUI(),r=this["otherCard"+a],o=egret.Tween.get(i);1==n?o.to({x:this.cardMoveStartX,y:this.cardMoveStartY}).to({x:45*t,y:0}).call(function(){egret.Tween.removeTweens(i)}):o.to({x:this.cardMoveStartX,y:this.cardMoveStartY}).to({x:45*t,y:0},150+100*t).call(function(){egret.Tween.removeTweens(i)}),r.addChild(i),r.visible=!0},t.prototype.sendCard=function(){var e={cmd:"271163",roleId:PlayerManager.id};PlayerManager.isGameStart&&WebsocketEngine.getInstance().sendData(e)},t.prototype.breakGame=function(){var e="";e="游戏已断线，请检查网络";var t={};t.loadType=1,t.message=e,t.okFun=this.flushGame,1==t.titleType,TipsManager.getInStance().dispatchEvent(new StageEvent(StageEvent.VIEW_TIPS,t))},t.prototype.flushGame=function(){IframeManager.getInstance().sendMessage({forLobby:!0,cmd:"refresh"})},t.prototype.showShare=function(){null==this.menuView&&(this.menuView=new MenuView),this.addChild(this.menuView),this.menuView.showShare()},t.prototype.onTweenGroupComplete=function(e){e.target;this.fallowMove.stop(),this.fallowMove.play(0)},t.prototype.sendReady=function(){var e={cmd:"271067"};WebsocketEngine.getInstance().sendData(e)},t.prototype.onClick=function(){SoundManager.getInstance().playMusic("bgMusic")},t.prototype.showRecordView=function(){var e=this;null==this.recordView&&(this.recordView=new RecordView),this.addChild(this.recordView),this.recordView.sendLastGameMsg(),egret.Tween.get(this.recordView.moveGroup).to({x:-567}).to({x:0},400).call(function(){egret.Tween.removeTweens(e.recordView.moveGroup)})},t.prototype.hideRecordView=function(){var e=this;egret.Tween.get(this.recordView.moveGroup).to({x:-567},400).call(function(){egret.Tween.removeTweens(e.recordView.moveGroup),e.removeChild(e.recordView)})},t.prototype.cancelInject=function(){var e={cmd:"271162",roleId:PlayerManager.id};WebsocketEngine.getInstance().sendData(e),1!=PlayerManager.gameType||PlayerManager.lookCard||(PlayerManager.isCanLookCard=!0)},t.prototype.showChatView=function(){var e=this;null==this.chatView&&(this.chatView=new ChatView),RES.getResAsync("clickChat_json",function(){e.addChild(e.chatView)},this)},t.prototype.hideChatView=function(){var e=this;egret.Tween.get(this.chatView.chatGroup).call(function(){egret.Tween.removeTweens(e.chatView.chatGroup),e.removeChild(e.chatView)})},t.prototype.showMenu=function(){var e=this;null==this.menuView&&(this.menuView=new MenuView),this.menuView.initMenu(),egret.Tween.get(this.menuView.menuGroup).to({x:-290}).to({x:0},200).call(function(){egret.Tween.removeTweens(e.menuView.menuGroup)}),RES.getResAsync("menu_json",function(){e.addChild(e.menuView)},this)},t.prototype.hideMenu=function(){var e=this;egret.Tween.get(this.menuView.menuGroup).to({x:-290},200).call(function(){egret.Tween.removeTweens(e.menuView.menuGroup)}),this.menuView.hideAll(!1)},t.prototype.clickRoomStart=function(){var e={cmd:"271125",roomId:PlayerManager.roomId,roleId:PlayerManager.id};WebsocketEngine.getInstance().sendData(e)},t.prototype.closeChipSlider=function(){this.chipSlider.visible=!1;var e=this.addInjectBtn.getChildAt(1);e.source="addInjectImg_png",this.addInjectBtn.name="add",this.hideAllInjectBtn(!0,1)},t.prototype.sendGetInjectNums=function(e){null==this.chipSlider&&(this.chipSlider=new ChipSliderView,this.addChild(this.chipSlider)),this.chipSlider.visible=!0;var t=PlayerManager.maxInjectNum;t=PlayerManager.lookCard?PlayerManager.maxInjectNum:PlayerManager.maxInjectNum/2,this.chipSlider.setVsliderValue(PlayerManager.minAddInjectNum,PlayerManager.minAddInjectNum,t),this.hideAllInjectBtn(!1,.5)},t.prototype.clickLocal=function(e){if(""==e.currentTarget.name)PlayerManager.sendSeatNum=this.setClickSeatNum(e.currentTarget,!0),this.sendChooseSeatNum();else if("info"==e.currentTarget.name){var t=this.setClickSeatNum(e.currentTarget,!1),a=PlayerInfoCache.getInstance().getPlayerByLocalSeatno(t);if(null==a||""==a.id)return;var n={cmd:271087,otherRoleId:a.id,roleId:PlayerManager.id};WebsocketEngine.getInstance().sendData(n)}else"yaoqing"==e.currentTarget.name&&this.showShare()},t.prototype.sendChooseSeatNum=function(){var e={cmd:"271006",seat:PlayerManager.sendSeatNum,roleId:PlayerManager.id,roomId:PlayerManager.roomId};WebsocketEngine.getInstance().sendData(e)},t.prototype.setClickSeatNum=function(e,t){var a=0;switch(e){case this.player1:a=1;break;case this.player2:a=2;break;case this.player3:a=3;break;case this.player4:a=4;break;case this.player5:a=5;break;case this.player6:a=6;break;default:return}var n=0,i=0,r=PlayerInfoCache.getInstance().getMe();return n=r.seatNo,t&&1==t?(i=a+n,i>6?i%=6:i=a+n):i=a,i},t.prototype.hideAllInjectBtn=function(e,t){this.CancelInjectBtn.alpha=t,this.VSInjectBtn.alpha=t,this.followInjectBtn.alpha=t,this.followInjectBtn1.alpha=t,this.CancelInjectBtn.touchEnabled=e,this.VSInjectBtn.touchEnabled=e,this.followInjectBtn.touchEnabled=e,this.followInjectBtn1.touchEnabled=e},t.prototype.sendVs=function(){var e={cmd:"271164",roleId:PlayerManager.id};WebsocketEngine.getInstance().sendData(e)},t.prototype.sendVsInject=function(e){var t=this.followInjectBtn.label,a={cmd:"271165",roleId:PlayerManager.id,vsChipNum:t,otherId:e.id};WebsocketEngine.getInstance().sendData(a)},t.prototype.showFallowInject=function(e){PlayerManager.followForever=e.boo,1==e.boo?(this.fallowMoveGroup.visible=!0,this.fallowMove.play(0),this.followInjectBtn.alpha=.5,this.followInjectBtn.touchEnabled=!1):(this.fallowMoveGroup.visible=!1,this.fallowMove.stop())},t.prototype.readyError=function(){var e={};e.loadType=1,e.message="准备异常，请返回大厅重试",e.okFun=this.backRoom,1==e.titleType,TipsManager.getInStance().dispatchEvent(new StageEvent(StageEvent.VIEW_TIPS,e))},t.prototype.saveGameData=function(e){parseInt(e.round)>0&&(PlayerManager.isBreakLine=!0),PlayerManager.roomId=e.roomId,PlayerManager.injectNum=parseInt(e.diZhuScore),PlayerManager.totalRound=e.roundCount,PlayerManager.leftRound=e.leftRound,PlayerManager.maxTotalChip=e.maxSocre,PlayerManager.baoziWin=e.boom,PlayerManager.gameType=e.gameType,10==parseInt(e.roundCount)?PlayerManager.gold="60":15==parseInt(e.roundCount)?PlayerManager.gold="70":20==parseInt(e.roundCount)?PlayerManager.gold="80":PlayerManager.gold="100",e.isAA?(PlayerManager.costType="AA制",PlayerManager.isAA=!0):(PlayerManager.costType="房主支付",PlayerManager.isAA=!1),0!=e.minVsScore&&(PlayerManager.minVsScore=e.minVsScore>=100?100:200)},t.prototype.delBackPlayer=function(e){if(-1!=parseInt(e.seat)){var t=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(e.seat),a=this["player"+t];a.hidePlayerInfo(),a.name="",PlayerInfoCache.getInstance().deletePlayerByID(e.roleId)}},t.prototype.showPlayerInfo=function(e){null==this.playerInfo&&(this.playerInfo=new PlayerInfoView,this.addChild(this.playerInfo)),this.playerInfo.visible=!0,this.playerInfo.setPlayerInfo(e.player)},t.prototype.setPlayerReady=function(e){var t=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(e.seat);this["player"+t];null==this.player&&(this.player=PlayerInfoCache.getInstance().getMe());var a=PlayerInfoCache.getInstance().getPlayerByLocalSeatno(t);a.isReady=e.isReady,e.isReady},t.prototype.initOwnPlayer=function(e){var t=new PlayerVo;t.nickName=e.nickname,t.isMine=!0,t.headImageUrl=e.headImgUrl,t.gold=e.gold,"1"==e.sex?t.sex=!0:t.sex=!1,t.id=e.roleId,PlayerInfoCache.getInstance().addPlayer(t)},t.prototype.gameStartedSeatDown=function(e,t){PlayerManager.seatDown=t,this.initSeatPlayer(e.seatInfo),this.initGameInfo(),this.initAllPlayerBgCard(!0),null!=this.cirTime&&this.cirTime.hideView(),this.recoverInjectInfo(e.seatInfo,e.giveUpTime),this.myCardGroup.visible=!1,this.allPlayerInjectChipGroup.visible=!0,this.playerChipNumGroup6.visible=!1},t.prototype.setOwn=function(e){if(0==e)this.startBtn.visible=!1,PlayerManager.roomMasterType=0,PlayerManager.ownNickName="";else{var t=PlayerInfoCache.getInstance().getPlayerById(e);t.isReady=!0,PlayerManager.ownNickName=t.nickName;var a=PlayerInfoCache.getInstance().getPlayerSize();2>a?this.player.id==t.id?(this.startBtn.visible=!0,PlayerManager.roomMasterType=1):(this.startBtn.visible=!1,PlayerManager.roomMasterType=0):PlayerManager.isGameState<1&&this.player.id==t.id?(this.startBtn.visible=!0,PlayerManager.roomMasterType=1):this.startBtn.visible=!1}},t.prototype.setBankerReadImg=function(e){var t=PlayerInfoCache.getInstance().getPlayerById(e);this["player"+t.localSeatNo].showReadImg(t.localSeatNo,!0)},t.prototype.setOwnReady=function(e){if(0!=parseInt(e.owerId)){var t=PlayerInfoCache.getInstance().getPlayerById(e.owerId);this.player.id==t.id}},t.prototype.showLookPlayer=function(e){var t=this;null==this.recordView&&(this.recordView=new RecordView),this.addChild(this.recordView),this.recordView.showLookPlayer(e),egret.Tween.get(this.recordView.moveGroup).to({x:0},300).call(function(){egret.Tween.removeTweens(t.recordView.moveGroup)})},t.prototype.gameStartJoin=function(e){this.lookPlayerRecoverChips(e),this.initAllPlayerBgCard(!0),this.recoverInjectInfo(e.listSeatData,e.giveUpTime),PlayerManager.leftRound=e.leftRound,this.injectLable.text=e.totalScore,this.gameStartBtnGroup.visible=!1,this.startBtn.visible=!1,this.InjectBtnGroup.visible=!0,this.myCardGroup.visible=!0,this.otherCard6.visible=!0,PlayerManager.isGameStart=!0,PlayerManager.isTotalGameStart=!0;PlayerInfoCache.getInstance().getPlayerByLocalSeatno(5)},t.prototype.lookPlayerRecoverChips=function(e){for(var t=parseInt(e.totalScore),a=1;7>a;a++){var n=PlayerInfoCache.getInstance().getPlayerByLocalSeatno(a);null!=n&&this.getChipSourceByChipNums(t,a)}},t.prototype.showLastGameView=function(e){this.recordView.showLastGameView(e)},t.prototype.showTotalGameView=function(e){this.recordView.showTotalGameView(e)},t.prototype.playerStandUp=function(e){var t=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(parseInt(e.seatId)),a=PlayerInfoCache.getInstance().getPlayerByLocalSeatno(t),n=PlayerInfoCache.getInstance().getMe();if(this["player"+t].showReadImg(a.id,!1),this["player"+t].playerInfo.visible=!1,a.seatNo=0,a.localSeatNo=0,a.id==n.id)PlayerManager.seatDown=!1,this.myCardGroup.visible=!1,this.myCardTypeGroup.visible=!1,this.InjectBtnGroup.visible=!1,PlayerManager.isResetSeat=!0,this.startBtn.visible=!1,this.chatGroup.visible=!1,this.setSeatDownBtnVisible();else if(a.id!=n.id&&0!=n.seatNo){var i=this["otherCard"+t],r=this["otherCardTips"+t],o=this["playerChipNumGroup"+t];i.visible=!1,r.visible=!1,o.visible=!1}var s=PlayerInfoCache.getInstance().getSeatDownPlayer(),c=s.length;if(0==c)PlayerManager.seatDown=!1,PlayerInfoCache.getInstance().initPlayerLocalSeatNo(),this.getAllPlayer();else for(var l=0;7>l;l++)PlayerInfoCache.getInstance().initPlayerLocalSeatNo(),this.getAllPlayer()},t.prototype.recoverDissolve=function(e){if(0!=e.agreeDisloveNum){var t=PlayerInfoCache.getInstance().getPlayerById(e.agreeDisloveId);PlayerManager.dissolveName=t.nickName,PlayerManager.dissolveTime=15e3-parseInt(e.agreeDisloveTime);var a={};a.loadType=2,a.message=t.nickName+"申请立即解散牌局",a.okFun=this.agreeDissolve,a.cancelFun=this.cancelDissolve,a.titleType=2,TipsManager.getInStance().dispatchEvent(new StageEvent(StageEvent.VIEW_TIPS,a));var n={};n.type=1,n.num=1,n.roleId=e.agreeDisloveId,TipsManager.getInStance().dispatchEvent(new StageEvent(StageEvent.UPDATE_NUMS,n)),e.agreeDisloveId==PlayerManager.id&&TipsManager.getInStance().dispatchEvent(new StageEvent(StageEvent.HIDE_BTN,null))}},t.prototype.showDissolveNumOk=function(){var e={};e.loadType=1,e.message="房间已经被解散，即将返回大厅！",e.okFun=this.backRoom,e.titleType=1,TipsManager.getInStance().dispatchEvent(new StageEvent(StageEvent.VIEW_TIPS,e))},t.prototype.showAgreeDissolveNum=function(e){var t=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(e.seat);PlayerInfoCache.getInstance().getPlayerByLocalSeatno(t);if(1==e.disAgree){var a={};a.loadType=0,a.message="同意解散人数不足，解散房间失败！",a.okFun=null,a.titleType=1,TipsManager.getInStance().dispatchEvent(new StageEvent(StageEvent.VIEW_TIPS,a))}else{var n={};n.type=1,n.num=e.num,n.roleId=e.roleId,TipsManager.getInStance().dispatchEvent(new StageEvent(StageEvent.UPDATE_NUMS,n));var a={};1==e.isDissolveRoom&&(a.loadType=1,a.message="解散房间成功，即将返回大厅！",a.okFun=this.backRoom,a.titleType=1,TipsManager.getInStance().dispatchEvent(new StageEvent(StageEvent.VIEW_TIPS,a)))}},t.prototype.backRoom=function(){var e={cmd:271104,roleId:PlayerManager.id};WebsocketEngine.getInstance().sendData(e),IframeManager.getInstance().sendMessage({forLobby:!0,cmd:"close"})},t.prototype.showPlayerDissolveGame=function(e){var t=PlayerInfoCache.getInstance().getPlayerById(e.roleId);PlayerManager.dissolveName=t.nickName;var a={};a.loadType=2,a.message=t.nickName+"申请立即解散牌局",a.okFun=this.agreeDissolve,a.cancelFun=this.cancelDissolve,a.titleType=2,TipsManager.getInStance().dispatchEvent(new StageEvent(StageEvent.VIEW_TIPS,a));var n={};n.type=0,n.num=1,TipsManager.getInStance().dispatchEvent(new StageEvent(StageEvent.UPDATE_NUMS,n)),e.roleId==PlayerManager.id&&TipsManager.getInStance().dispatchEvent(new StageEvent(StageEvent.HIDE_BTN,null))},t.prototype.agreeDissolve=function(){var e={cmd:"271010",roleId:PlayerManager.id,agree:!0};WebsocketEngine.getInstance().sendData(e)},t.prototype.cancelDissolve=function(){var e={cmd:"271010",roleId:PlayerManager.id,agree:!1};WebsocketEngine.getInstance().sendData(e)},t.prototype.upDateBreakLineInfo=function(e){var t=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(e.seat);this["player"+t].setBreakLine(e.online)},t.prototype.breakLine=function(e){PlayerManager.round=parseInt(e.round),PlayerManager.round>0&&(PlayerManager.isTotalGameStart=!0),e.seatData&&0!=e.seatData.seatId&&(PlayerManager.seatDown=!0);var t=PlayerInfoCache.getInstance().getMe();t.id==e.owerRoleId&&(PlayerManager.roomMasterType=1),this.initSeatPlayer(e.seatInfo),PlayerManager.roomId=e.roomId;var a=e.xiaZhuScore;if(PlayerManager.maxInjectNum=a[4],e.first)PlayerManager.isGameState=2,this.chatGroup.visible=!0,this.allPlayerInjectChipGroup.visible=!0,this.gameStartBtnGroup.visible=!1,this.startBtn.visible=!1,this.InjectBtnGroup.visible=!0,this.myCardGroup.visible=!0,this.otherCard6.visible=!0,this.recovInjectChips(e),PlayerManager.isGameStart=!0,PlayerManager.isTotalGameStart=!0,this.injectLable.text=e.totalScore,this.initAllPlayerBgCard(!0),this.setForeverFallow(e),e.seatData&&1==e.seatData.can&&(PlayerManager.lookCard=!0,this.recoverCards(e.seatData),this.otherCardTips6.visible=!1,this.turnCardRect.touchEnabled=!1,PlayerManager.isCanLookCard=!1),this.recoverInjectInfo(e.seatInfo,e.giveUpTime);else{this.recoverPlayerReadyState(e.seatInfo);var n=PlayerInfoCache.getInstance().getPlayerSize();parseInt(e.round)>0?(PlayerManager.isGameState=1,this.gameStartBtnGroup.visible=!0,t.id==e.owerRoleId&&2>n?this.startBtn.visible=!0:this.startBtn.visible=!1):PlayerManager.isGameState=0}},t.prototype.recoverPlayerReadyState=function(e){for(var t=e,a=t.length,n=0;a>n;n++){var i=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(t[n].seatId);this["player"+i].showReadImg(i,t[n].readySitDown)}},t.prototype.setForeverFallow=function(e){var t=this;e.seatData.followForever&&1==e.seatData.followForever&&RES.getResAsync("fallowForever_json",function(){t.fallowMoveGroup.visible=!0,t.fallowMove.play(0),t.followInjectBtn.alpha=.5,t.followInjectBtn.touchEnabled=!1,PlayerManager.followForever=!0},this)},t.prototype.recovInjectChips=function(e){this.chipInjectGroup.visible=!0;var t=parseInt(e.totalScore),a=PlayerInfoCache.getInstance().getPlayerSize();PlayerManager.isGameStart&&0==t&&(t=a*PlayerManager.injectNum),this.getChipSourceByChipNums(t)},t.prototype.recoverCards=function(e){for(var t=this,a=e.cards,n=Cards.getCardsForList(a,!0),i=this.otherCard6,r=(n.length,0);3>r;r++){var o=i.getChildAt(r);o.turnCard(n[r])}this.turnCardRect.touchEnabled=!1,egret.Tween.get(this).wait(500).call(function(){t.initMyCardType(e.cardType)})},t.prototype.recoverInjectInfo=function(e,t){for(var a=e.length,n=PlayerInfoCache.getInstance().getMe(),i=0;a>i;i++)if(e[i].seatId==n.seatNo)this.Player1ChipNums6.text=e[i].xiaZhuTotalScore,PlayerManager.followScore=parseInt(e[i].followScore),"1"==e[i].operation&&(this.ownInject(),"1"==e[i].isBiPai&&(this.VSInjectBtn.alpha=1,this.VSInjectBtn.touchEnabled=!0)),1==e[i].vsCardLose&&this.ownVsCardLose(),0==e[i].can&&1==e[i].muffledCard?PlayerManager.isCanLookCard=!0:PlayerManager.isCanLookCard=!1,"1"==e[i].isGiveUpCard&&this.ownGiveUpCard(),1==e[i].gameSitDowm&&(this.InjectBtnGroup.visible=!1,this.myCardGroup.visible=!1);else{var r=e[i].seatId,o=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(r),s=this["otherCard"+o],c=this["otherCardTips"+o];this.initPlayerInjectChips(o,e[i].xiaZhuTotalScore),c.visible=!1,1==e[i].can&&(c.source="diajikanpaiyikanpai_png",c.visible=!0),1==e[i].vsCardLose&&(c.source="vsCardLoser_png",c.visible=!0),"1"==e[i].isGiveUpCard&&(c.source="giveUpCardTips_png",c.visible=!0,this.otherGiveUpCardMove(s,o)),0==n.seatNo&&(this.CancelInjectBtn.alpha=.5,this.CancelInjectBtn.touchEnabled=!1)}},t.prototype.ownInject=function(){PlayerManager.minAddInjectNum=PlayerManager.followScore+1,this.cirMoving(6),this.followInjectBtn.label=PlayerManager.followScore+"",this.followInjectBtn.alpha=1,this.followInjectBtn.touchEnabled=!0,this.CancelInjectBtn.alpha=1,this.CancelInjectBtn.touchEnabled=!0,PlayerManager.followScore==PlayerManager.maxInjectNum?(this.addInjectBtn.alpha=.5,this.addInjectBtn.touchEnabled=!1):(this.addInjectBtn.alpha=1,this.addInjectBtn.touchEnabled=!0)},t.prototype.ownVsCardLose=function(){this.myCardTypeGroup.visible=!0,this.myState.source="vsCardLoser_png",this.myState.visible=!0,this.myStateBg.visible=!0,PlayerManager.VSCardLose=!0,this.followInjectBtn1.alpha=.5,this.followInjectBtn1.touchEnabled=!1},t.prototype.ownGiveUpCard=function(){var e=this,t=egret.Tween.get(this.myCardGroup);t.to({y:450,alpha:0,scaleX:.5,scaleY:.5},300).to({y:1206}).wait(300).to({y:1008,alpha:1,scaleX:1,scaleY:1},300).call(function(){egret.Tween.removeTweens(e.myCardGroup)}),this.myCardTypeGroup.visible=!0,this.CancelInjectBtn.touchEnabled=!1,this.CancelInjectBtn.alpha=.5,this.followInjectBtn1.alpha=.5,this.followInjectBtn1.touchEnabled=!1,this.myState.source="giveUpCardTips_png",this.myState.visible=!0,this.myStateBg.visible=!0,PlayerManager.GiveUpCard=!0},t.prototype.showChat=function(e){var t=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(e.seatId),a=PlayerInfoCache.getInstance().getPlayerByLocalSeatno(t);if("1"==e.type){var n=this.getChatLocation(t);null==this.chatUi&&(this.chatUi=new ChatUiView,this.chatUi.touchEnabled=!1),this.chatUi.showChat(e.msg,a.sex,t),6>t&&t>3?(-1==e.msg.indexOf("face")&&(this.chatUi.chatBg.visible=!1,this.chatUi.chatBg23.visible=!0),this.chatUi.chatText.left=20,this.chatUi.x=n[0].x,this.chatUi.y=n[0].y):t>0&&4>t&&(-1==e.msg.indexOf("face")&&(this.chatUi.chatBg.visible=!0,this.chatUi.chatBg23.visible=!1),this.chatUi.chatText.right=10,this.chatUi.x=n[0].x,this.chatUi.y=n[0].y),this.addChild(this.chatUi)}},t.prototype.getChatLocation=function(e){var t=[];switch(e){case 1:t.push(new egret.Point(400,623));break;case 2:t.push(new egret.Point(400,343));break;case 3:t.push(new egret.Point(360,78));break;case 4:t.push(new egret.Point(100,343));break;case 5:t.push(new egret.Point(100,623));break;default:return}return t},t.prototype.ownShowChat=function(e){var t=this;if("1"==e.type)if(this.ownChatGroup.visible=!0,-1!=e.msg.indexOf("face")&&e.msg.length<8)this.ownChatBg.visible=!1,this.ownChatText.visible=!1,DragonBonesManager.getInstance().startDragon(this.ownChatGifGroup,"face","face","face","face",e.msg,"newAnimation",30,110,1,1,!1);else{var a=e.msg.split("_");this.ownChatBg.visible=!0,this.ownChatText.text=a[0],this.ownChatText.visible=!0;var n=egret.Tween.get(this.ownChatGroup);n.wait(2e3).to({visible:!1}).call(function(){egret.Tween.removeTweens(t.ownChatGroup)}),PlayerSoundManager.getInstance().playMessageSound(this.player.sex,a[1])}else WeixinUtil.getInstance().downloadVoice(e.msg)},t.prototype.initContinueGameTime=function(){this.continueTimer.addEventListener(egret.TimerEvent.TIMER,this.updateTime,this),this.continueTimer.start()},t.prototype.updateTime=function(){return this.leftTime--,this.leftTime<=0?(this.roomTipsGroup.visible=!1,this.leftTime=5,void this.continueTimer.stop()):void(this.startLeftTime.text=this.leftTime.toString())},t.prototype.initInjectBtn=function(){this.followInjectBtn.alpha=.5,this.VSInjectBtn.alpha=.5,this.addInjectBtn.alpha=.5,this.followInjectBtn1.alpha=1,this.followInjectBtn1.touchEnabled=!0,this.addInjectBtn.touchEnabled=!1,this.followInjectBtn.touchEnabled=!1,this.VSInjectBtn.touchEnabled=!1,this.followInjectBtn.label=PlayerManager.injectNum+"",this.addInjectBtn.label=""},t.prototype.showSmallTotalScore=function(e){var t=this;null==this.smallScore&&(this.smallScore=new SmallTotalScoreView),this.smallScore.init(),this.smallScore.setSmallScore(e),PlayerManager.leftRound=e.leftRound,this.initTotalScore(e),egret.Tween.get(this).wait(4e3).call(function(){PlayerManager.isGameState=1,t.addChild(t.smallScore),t.smallScore.visible=!0,t.roomTipsGroup.visible=!0,t.initGameInfo(),t.initContinueGameTime()}),0!=e.totalScoreList.length&&(null!=e.totalScoreList||0!=e.totalScoreList.length)&&(PlayerManager.isGameState=3,egret.Tween.get(this).wait(5e3).call(function(){null!=t.smallScore&&(t.smallScore.visible=!1);var a=new BigEndScoreView(e.totalScoreList);t.addChild(a)}))},t.prototype.initTotalScore=function(e){for(var t=e.playerList,a=t.length,n=0;a>n;n++){var i=PlayerInfoCache.getInstance().getPlayerById(t[n].roleId),r=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(i.seatNo);0!=r&&(this.setPlayerTotalScore(r,parseInt(t[n].totalScore)),i.score=parseInt(t[n].totalScore))}},t.prototype.setPlayerTotalScore=function(e,t){this["player"+e].initPlayerScore(t)},t.prototype.showSeatDownErrorTips=function(e){var t={};t.loadType=0,1==e?t.message="该位置已经有人了,请选择其他座位游戏哦~~":2==e?t.message="游戏已经开始，在本轮结束之后再坐下游戏哦~~":3==e?t.message="游戏中途不能站起哦，请在本轮结束之后再站起~~":4==e?t.message="先站起围观，再重新选座哦~~":5==e&&(t.message="房卡不足，请充值"),t.okFun=null,t.titleType=1,TipsManager.getInStance().dispatchEvent(new StageEvent(StageEvent.VIEW_TIPS,t))},t.prototype.showStartErrorTips=function(e){var t="";t=1==e?"有玩家没有准备哦~~":"玩家人数不足哦~~";var a={};a.loadType=0,a.message=t,a.okFun=null,a.titleType=1,TipsManager.getInStance().dispatchEvent(new StageEvent(StageEvent.VIEW_TIPS,a)),this.gameStartBtnGroup.visible=!0,this.startBtn.visible=!0,this.InjectBtnGroup.visible=!1,PlayerManager.isGameStart=!1},t.prototype.showVSMovie=function(){var e=this;RES.getResAsync("vsMsg_json",function(){e.VSGroup.visible=!0,e.vsRight.source="vs_right_png",e.vsLeft.source="vs_left_png",e.vsImg.source="p_png"},this),egret.Tween.get(this.leftGroup).to({x:0},200).wait(2e3).to({x:-520},200).call(function(){egret.Tween.removeTweens(e.leftGroup)}),egret.Tween.get(this.rightGroup).to({x:260},200).wait(2e3).to({x:750},200).call(function(){egret.Tween.removeTweens(e.rightGroup)}),egret.Tween.get(this.vsImg).to({y:380},200).wait(2e3).to({y:1170},200).call(function(){egret.Tween.removeTweens(e.vsImg),e.VSGroup.visible=!1})},t.prototype.perspective=function(e){var t,a=0;a=e.cheatData.length,t=e.cheatData;for(var n=PlayerInfoCache.getInstance().getMe(),i=0;a>i;i++)if(t[i].seatId==n.seatNo){var r=t[i].cards;if(null==r||0==r.length)continue;for(var o=Cards.getCardsForList(r,!0),s=this.otherCard6,c=o.length,l=0;c>l;l++){var h=s.getChildAt(l);h.turnCard(o[l])}}else{var d=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(t[i].seatId),u=this["otherCard"+d],r=t[i].cards;if(null==r||0==r.length)continue;for(var o=Cards.getCardsForList(r,!0),p=u,c=o.length,g=0;c>g;g++){var y=p.getChildAt(g);y.turnCard(o[g])}}},t.prototype.actionTurnCard=function(e){var t=this;try{var a,n=0;if(e.seatInfo){this.actionVs=!0,n=e.seatInfo.length,a=e.seatInfo;var i={};i.loadType=0,i.message="已经达到下注筹码上限，即将翻开所有玩家牌~",i.okFun=null,i.titleType=1,TipsManager.getInStance().dispatchEvent(new StageEvent(StageEvent.VIEW_TIPS,i))}else n=e.playerList.length,a=e.playerList;for(var r=0,o=PlayerInfoCache.getInstance().getMe(),s=function(e){if(a[e].seatId==o.seatNo){PlayerManager.isCanLookCard=!1,c.otherCardTips6.visible=!1;var n=a[e].cards;if(null==n||0==n.length)return"continue";for(var i=Cards.getCardsForList(n,!0),s=c.otherCard6,l=i.length,h=0;l>h;h++){var d=s.getChildAt(h);d.turnCard(i[h])}c.turnCardRect.touchEnabled=!1,1==a[e].winOrLose?r=a[e].seatId:(c.myCardTypeGroup.visible=!0,c.myState.visible=!0,c.myStateBg.visible=!0,c.myState.source="vsCardLoser_png"),1==PlayerManager.baoziWin&&"5"==a[e].cardType&&(c.baoziGroup.visible=!0),egret.Tween.get(c).wait(500).call(function(){t.initMyCardType(a[e].cardType)})}else{var u=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(a[e].seatId),p=c["otherCard"+u],n=a[e].cards;if(null==n||0==n.length)return"continue";for(var i=Cards.getCardsForList(n,!0),g=p,l=i.length,y=0;l>y;y++){var v=g.getChildAt(y);v.turnCard(i[y])}if(1==a[e].winOrLose)r=a[e].seatId;else{var m=c["otherCardTips"+u];m.visible=!0,m.source="vsCardLoser_png"}if(1==PlayerManager.baoziWin&&"5"==a[e].cardType){c.baoziGroup.visible=!0;var f=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(a[e].seatId),I=c["boomTips"+f];I.visible=!0,c.showBoomScore(parseInt(a[e].boomScore),f)}}},c=this,l=0;n>l;l++)s(l);var h=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(r);this.moveWinnerChipsByLocalSeat(h)}catch(d){}},t.prototype.showBoomScore=function(e,t){this["player"+t].setBoomWinOrLoseScore(e,t)},t.prototype.showPlayerVSCard=function(e){null!=this.cirTime&&this.cirTime.hideView();var t=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(e.seat),a=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(e.otherSeat);this.getChipSourceByChipNums(parseInt(e.followScore),t),PlayerManager.minAddInjectNum=parseInt(e.followScore)+1,this.injectLable.text=e.totalScore,this.winOrLoseLeftImg.visible=!1,this.winOrLoseRightImg.visible=!1,this.showVSMovie(),this.hideVsPlayer(e,t,a);var n=parseInt(e.nextPlayerSeat);this.nextInjectPlayer(n,e.followScore,1,e.nextCanLookCards)},t.prototype.hideVsPlayer=function(e,t,a){var n=this["player"+t],i=this["player"+a];PlayerManager.VsPlayerArr.push(n),PlayerManager.VsPlayerArr.push(i);var r=PlayerInfoCache.getInstance().getPlayerByLocalSeatno(t),o=PlayerInfoCache.getInstance().getPlayerByLocalSeatno(a);this.initPlayerInjectChips(t,e.xiaZhuTotalScore),PlayerSoundManager.getInstance().playMessageSound(r.sex,"cmp"),this.showVsMove(e,r,o)},t.prototype.showVsMove=function(e,t,a){var n=this,i=this.VSGroup.getChildByName("clickPlayer");null==i&&(i=new PlayerView,this.VSGroup.addChildAt(i,2)),i.setPlayerInfo(t),i.name="clickPlayer",i.x=220,i.y=408;var r=this.VSGroup.getChildByName("otherPlayer");null==r&&(r=new PlayerView,this.VSGroup.addChildAt(r,2)),r.setPlayerInfo(a),r.name="otherPlayer",r.x=397,r.y=593,egret.Tween.get(this).wait(1e3).call(function(){n.setPlayerWinOrLose(e)
})},t.prototype.setWinerChipMove=function(e){if("0"!=e.isGameOver){var t=0;if("1"==e.isGameOver){null!=this.cirTime&&this.cirTime.hideView(),t="1"==e.PlayerWinOrLose?e.seat:e.otherSeat;var a=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(t);this.moveWinnerChipsByLocalSeat(a)}}},t.prototype.moveWinnerChipsByLocalSeat=function(e){var t=this,a=0,n=0;switch(e){case 5:a=220,n=560;break;case 1:a=660,n=560;break;case 2:a=660,n=290;break;case 3:a=340,n=140;break;case 4:a=220,n=290;break;case 6:a=340,n=960;break;default:return}egret.Tween.get(this.chipInjectGroup).to({x:a,y:n,scaleX:.4,scaleY:.3},500).to({x:300,y:450,visible:!1,scaleX:1,scaleY:1}).call(function(){egret.Tween.removeTweens(t.chipInjectGroup),t.chipInjectGroup.removeChildren(),t.chipInjectGroup.visible=!0}),PlayerSoundManager.getInstance().playButtonSound("winChipsSound")},t.prototype.setPlayerWinOrLose=function(e){var t=this,a=0;this.winOrLoseLeftImg.visible=!0,this.winOrLoseRightImg.visible=!0,"1"==e.PlayerWinOrLose?(this.winOrLoseLeftImg.source="victory_png",this.vsLeft.source="vs_left_png",a=e.otherSeat):(RES.getResAsync("vs_left1_png",function(){t.vsLeft.source="vs_left1_png"},this),this.winOrLoseLeftImg.source="failure_img_png",a=e.seat,PlayerManager.VSCardLose=!0),"1"==e.otherPlayerWinOrLose?(this.winOrLoseRightImg.source="victory_png",this.vsRight.source="vs_right_png"):(RES.getResAsync("vs_right1_png",function(){t.vsRight.source="vs_right1_png"},this),this.winOrLoseRightImg.source="failure_img_png"),this.updataVsCardLoseTips(a),this.setWinerChipMove(e)},t.prototype.updataVsCardLoseTips=function(e){var t=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(e);if(6==t)this.myCardTypeGroup.visible=!0,PlayerManager.lookCard?(this.myCardType.visible=!0,this.myCardTypeBg.visible=!0):(this.myCardType.visible=!1,this.myCardTypeBg.visible=!1),this.myState.visible=!0,this.myStateBg.visible=!0,this.myState.source="vsCardLoser_png",this.CancelInjectBtn.alpha=.5,this.CancelInjectBtn.touchEnabled=!1,PlayerManager.VSCardLose=!0,this.followInjectBtn1.alpha=.5,this.followInjectBtn1.touchEnabled=!1,this.fallowMoveGroup.visible=!1,this.fallowMove.stop();else{var a=this["otherCardTips"+t];this["otherCard"+t];a.visible=!0,a.source="vsCardLoser_png"}},t.prototype.hideAllVsImg=function(){for(var e=1;6>e;e++)this["VSRect"+e].visible=!1,this["jiantou"+e].visible=!1},t.prototype.chooseVsPlayer=function(e){var t=this,a=e.otherPlayerSeat.length;if(1==a){var n=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(e.otherPlayerSeat[0]),i=PlayerInfoCache.getInstance().getPlayerByLocalSeatno(n);this.sendVsInject(i)}else{this.hideAllVsImg();for(var r=function(){var a=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(e.otherPlayerSeat[s]);RES.getResAsync("chooseVs_json",function(){var e=t.getVsRectByLocalSeat(a);e.name=a+"",t.chooseVsPlayerArr.push(e),t.chooseVsPlayerGroup.visible=!0,e.visible=!0,e.touchEnabled=!0},o)},o=this,s=0;a>s;s++)r()}},t.prototype.getVsRectByLocalSeat=function(e){var t=this["VSRect"+e],a=this["jiantou"+e];return a.name=e+"",this.jiantouMove(a),t},t.prototype.jiantouMove=function(e){e.visible=!0;var t=0,a=0,n=parseInt(e.name);5>n?(t=455,a=435):5==n?(t=640,a=620):6==n||(7==n?(t=105,a=125):(t=300,a=320)),6==n?egret.Tween.get(e,{loop:!0}).to({y:250}).to({y:230},400).to({y:250},100):egret.Tween.get(e,{loop:!0}).to({x:t}).to({x:a},400).to({x:t},100)},t.prototype.clickOtherPlayerVsCard=function(e){var t=parseInt(e.target.name),a=PlayerInfoCache.getInstance().getPlayerByLocalSeatno(t);this.sendVsInject(a),this.hideAllVSRect()},t.prototype.hideAllVSRect=function(){this.chooseVsPlayerGroup.visible=!1;for(var e=1;6>e;e++)egret.Tween.removeTweens(this["jiantou"+e])},t.prototype.winnerChipMove=function(e){var t=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(e);this.moveWinnerChipsByLocalSeat(t),null!=this.cirTime&&this.cirTime.hideView()},t.prototype.otherGiveUpCardMove=function(e,t){var a=0,n=0;switch(t){case 1:a=-200,n=0;break;case 2:a=-200,n=0;break;case 3:a=0,n=200;break;case 4:a=200,n=0;break;case 5:a=200,n=0;break;default:return}var i=egret.Tween.get(e);i.to({x:a,y:n,alpha:0,scaleX:.5,scaleY:.5},400).to({x:0,y:0,alpha:1,visible:!1,scaleX:1,scaleY:1}).call(function(){egret.Tween.removeTweens(e)})},t.prototype.otherFollowInject=function(e){null!=this.cirTime&&this.cirTime.hideView(),this.injectLable.text=e.totalScore;var t=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(e.seat);6==t&&(1!=PlayerManager.gameType||PlayerManager.lookCard||(PlayerManager.isCanLookCard=!0)),this.getChipSourceByChipNums(parseInt(e.followScore),t),this.nextInjectPlayer(parseInt(e.nextSeat),e.nextSeatfollowScore,e.isBiPai,e.nextCanLookCards),this.initPlayerInjectChips(t,e.xiaZhuTotalScore);var a=PlayerInfoCache.getInstance().getPlayerByLocalSeatno(t);PlayerSoundManager.getInstance().playMessageSound(a.sex,"follow2"),PlayerSoundManager.getInstance().playButtonSound("injectChipSound")},t.prototype.initPlayerInjectChips=function(e,t){var a=this["Player1ChipNums"+e];null!=a&&(a.text=t)},t.prototype.nextInjectPlayer=function(e,t,a,n){var i=PlayerInfoCache.getInstance().getMe();if(PlayerManager.minAddInjectNum=t+1,i.seatNo==e)PlayerManager.followForever&&1==PlayerManager.followForever?(this.followInjectBtn.alpha=.5,this.followInjectBtn.touchEnabled=!1):(this.followInjectBtn.alpha=1,this.followInjectBtn.touchEnabled=!0),this.followInjectBtn.label=t.toString(),t==PlayerManager.maxInjectNum||t==PlayerManager.maxInjectNum/2&&!PlayerManager.lookCard?(this.addInjectBtn.alpha=.5,this.addInjectBtn.touchEnabled=!1):(this.addInjectBtn.alpha=1,this.addInjectBtn.touchEnabled=!0),PlayerManager.VSCardLose&&PlayerManager.GiveUpCard||(this.CancelInjectBtn.alpha=1,this.CancelInjectBtn.touchEnabled=!0),1==a?(this.VSInjectBtn.alpha=1,this.VSInjectBtn.touchEnabled=!0):0==a&&(this.VSInjectBtn.alpha=.5,this.VSInjectBtn.touchEnabled=!1),1==PlayerManager.isCanLookCard?(this.otherCardTips6.visible=!0,this.turnCardRect.touchEnabled=!0):(this.otherCardTips6.visible=!1,this.turnCardRect.touchEnabled=!1),PlayerManager.followForever&&1==PlayerManager.followForever&&(this.followInjectBtn1.alpha=1,this.followInjectBtn1.touchEnabled=!0),this.cirMoving(6);else{var r=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(e);this.cirMoving(r),this.hideAllBtn(),0==PlayerManager.isCanLookCard?(this.turnCardRect.touchEnabled=!1,this.otherCardTips6.visible=!1):0!=i.seatNo&&(this.turnCardRect.touchEnabled=!0,this.otherCardTips6.visible=!0)}},t.prototype.cirMoving=function(e){var t=0,a=0;switch(e){case 5:t=60,a=589;break;case 1:t=690,a=589;break;case 2:t=690,a=309;break;case 3:t=375,a=64;break;case 4:t=60,a=309;break;case 6:t=80,a=1111;break;default:return}this.cirTimeMoving(t,a)},t.prototype.cirTimeMoving=function(e,t){this.cirTime.cirTimer(e,t)},t.prototype.hideAllBtn=function(){this.followInjectBtn.alpha=.5,this.followInjectBtn.touchEnabled=!1,this.addInjectBtn.alpha=.5,this.addInjectBtn.touchEnabled=!1,this.VSInjectBtn.alpha=.5,this.VSInjectBtn.touchEnabled=!1,this.CancelInjectBtn.alpha=.5,this.CancelInjectBtn.touchEnabled=!1},t.prototype.clickFollowInject=function(e){var t=parseInt(this.followInjectBtn.label),a={cmd:"271161",followScore:t,roleId:PlayerManager.id};WebsocketEngine.getInstance().sendData(a),1!=PlayerManager.gameType||PlayerManager.lookCard||(PlayerManager.isCanLookCard=!0)},t.prototype.clickFollowInject1=function(){var e={cmd:"271065",roleId:PlayerManager.id};if(0==this.clicktag){egret.clearTimeout(this.clearTimeoutNumber),this.clicktag=1,WebsocketEngine.getInstance().sendData(e);var t=this;this.clearTimeoutNumber=egret.setTimeout(function(){t.clicktag=0},this,500)}},t.prototype.sendAddInjectMsg=function(e){var t=parseInt(e.currentTarget.label),a={cmd:"271170",fillScore:t,roleId:PlayerManager.id};WebsocketEngine.getInstance().sendData(a),1!=PlayerManager.gameType||PlayerManager.lookCard||(PlayerManager.isCanLookCard=!0)},t.prototype.showPlayerAddInject=function(e){null!=this.cirTime&&this.cirTime.hideView(),this.injectLable.text=e.totalScore;var t=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(e.seatId);this.getChipSourceByChipNums(parseInt(e.fillScore),t),PlayerManager.minInjectNum=parseInt(e.fillScore)+1,this.initPlayerInjectChips(t,e.xiaZhuTotalScore),this.nextInjectPlayer(e.nextSeat,e.nextPlayerFollowScore,e.isBiPai,e.nextCanLookCards),this.ownIsLookCard(parseInt(e.seatId));var a=PlayerInfoCache.getInstance().getPlayerByLocalSeatno(t);PlayerSoundManager.getInstance().playMessageSound(a.sex,"add")},t.prototype.ownIsLookCard=function(e){var t=PlayerInfoCache.getInstance().getMe();t.seatNo==e&&1==PlayerManager.lookCard&&(this.turnCardRect.touchEnabled=!1,this.otherCardTips6.visible=!1)},t.prototype.gameStart=function(e){var t=this;PlayerManager.isGameState=2,this.otherCard6.removeChildren(),this.roomTipsGroup.visible=!1,this.leftTime=5;var a=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(e.nextSeat);this.cirMoving(a);var n=PlayerInfoCache.getInstance().getMe();n.seatNo==e.nextSeat&&(this.followInjectBtn.label=PlayerManager.injectNum+"",this.followInjectBtn.alpha=1,this.followInjectBtn.touchEnabled=!0,this.addInjectBtn.alpha=1,this.addInjectBtn.touchEnabled=!0,this.CancelInjectBtn.alpha=1,this.CancelInjectBtn.touchEnabled=!0),1==PlayerManager.gameType?(this.turnCardRect.touchEnabled=!1,this.otherCardTips6.visible=!1,PlayerManager.isCanLookCard=!1):0!=n.seatNo&&(this.turnCardRect.touchEnabled=!0,this.otherCardTips6.visible=!0),this.myCardGroup.visible=!0,this.otherCard6.visible=!0,this.InjectBtnGroup.visible=!0,this.gameStartBtnGroup.visible=!1,this.startBtn.visible=!1,PlayerManager.isGameStart=!0,PlayerManager.isTotalGameStart=!0,this.injectLable.text=e.diZhuScore,this.initAllPlayerBgCardDone=!1,this.initAllPlayerBgCard(!1),egret.Tween.get(this).wait(500).call(function(){t.initChip(),egret.Tween.removeTweens(t)}),this.allPlayerInjectChipGroup.visible=!0,0==n.seatNo&&(this.otherCardTips6.visible=!1,this.turnCardRect.touchEnabled=!1,this.CancelInjectBtn.alpha=.5,this.CancelInjectBtn.touchEnabled=!1,this.InjectBtnGroup.visible=!1),this.hideAllReadyImg()},t.prototype.hideAllReadyImg=function(){for(var e=1;7>e;e++){var t=this["player"+e];t&&null!=t&&t.showReadImg(e,!1)}},t.prototype.initChip=function(){this.chipInjectGroup.visible=!0;for(var e=1;7>e;e++){var t=PlayerInfoCache.getInstance().getPlayerByLocalSeatno(e);null!=t&&this.getChipSourceByChipNums(PlayerManager.injectNum,e)}PlayerSoundManager.getInstance().playButtonSound("injectChipSound")},t.prototype.fiveAddInjectMove=function(e,t){switch(t){case 5:this.chipMoveStartX=-50,this.chipMoveStartY=200;break;case 1:this.chipMoveStartX=180,this.chipMoveStartY=200;break;case 2:this.chipMoveStartX=180,this.chipMoveStartY=-80;break;case 3:this.chipMoveStartX=65,this.chipMoveStartY=-220;break;case 4:this.chipMoveStartX=-50,this.chipMoveStartY=-80;break;case 6:this.chipMoveStartX=65,this.chipMoveStartY=560}var a=70*Math.random(),n=250*Math.random(),i=egret.Tween.get(e);i.to({x:this.chipMoveStartX,y:this.chipMoveStartY}).to({x:a,y:n},500).call(function(){egret.Tween.removeTweens(e),e=null}),this.chipInjectGroup.addChild(e),this.chipInjectGroup.visible=!0,this.checkChipNums()},t.prototype.checkChipNums=function(){var e=this.chipInjectGroup.numChildren;e>30&&(this.chipInjectGroup.removeChildren(),this.getChipSourceByChipNums(parseInt(this.injectLable.text)))},t.prototype.getChipSourceByChipNums=function(e,t){for(var a=this.chipList,n=[];e>=a[0];)for(var i=a.length-1;i>-1;i--)if(e>=a[i]){e-=a[i];var r=this.getChipByChipNum(a[i]);n.push(r);break}for(var o=0;o<n.length;o++)t?this.fiveAddInjectMove(n[o],t):this.fiveAddInjectMove(n[o])},t.prototype.getChipByChipNum=function(e){var t=new eui.Image;return t.source=RES.getRes("chip"+e+"_png"),t},t.prototype.initGameInfo=function(){null==this.player&&(this.player=PlayerInfoCache.getInstance().getMe());for(var e=0;e<PlayerManager.VsPlayerArr.length;e++)PlayerManager.VsPlayerArr[e].visible=!0;this.VSGroup.visible=!1,this.baoziGroup.visible=!1;for(var e=1;6>e;e++){var t=this["boomTips"+e];t.visible=!1,this["player"+e].boomScore.visible=!1,this["otherCard"+e].removeChildren(),this["otherCard"+e].visible=!0,this["otherCardTips"+e].visible=!1,this["VSRect"+e].name=""}this.allPlayerInjectChipGroup.visible=!1;for(var a=0;6>a;a++){var n=this.allPlayerInjectChipGroup.getChildAt(a);n.visible=!1}if(null!=this.chipSlider&&(this.chipSlider.visible=!1,this.closeChipSlider()),!PlayerManager.isResetSeat){this.chipInjectGroup.removeChildren(),this.chipInjectGroup.visible=!0,this.chipInjectGroup.x=300,this.chipInjectGroup.y=450,this.chipInjectGroup.scaleX=1,this.chipInjectGroup.scaleY=1,this.injectLable.text="0";for(var i=1;7>i;i++){this["Player1ChipNums"+i].text=PlayerManager.injectNum;var r=PlayerInfoCache.getInstance().getPlayerByLocalSeatno(i);r&&(r.isGameingSeatDown=!1)}}this.InjectBtnGroup.visible=!1,this.otherCard6.removeChildren(),1==PlayerManager.gameType?(this.turnCardRect.touchEnabled=!1,this.otherCardTips6.visible=!1,PlayerManager.isCanLookCard=!1):0!=this.player.seatNo&&(this.turnCardRect.touchEnabled=!0,this.otherCardTips6.visible=!0,PlayerManager.isCanLookCard=!0),this.CancelInjectBtn.alpha=.5,this.CancelInjectBtn.touchEnabled=!1,this.myCardGroup.visible=!1,this.myCardTypeGroup.visible=!1,this.myState.visible=!1,this.myStateBg.visible=!1,this.myCardType.visible=!1,this.myCardTypeBg.visible=!1,PlayerManager.GiveUpCard=!1,PlayerManager.lookCard=!1,PlayerManager.VSCardLose=!1,PlayerManager.followForever=!1,this.initInjectBtn(),PlayerManager.minAddInjectNum=PlayerManager.injectNum+1,this.fallowMoveGroup.visible=!1,this.fallowMove.stop(),this.otherCardTips6.visible=!1,this.otherCardTips6.source="lookCardTips_png"},t.prototype.initRoomInfo=function(){this.player=PlayerInfoCache.getInstance().getMe(),0==this.player.seatNo&&(this.InjectBtnGroup.visible=!1),this.roomNum.text=PlayerManager.roomId.toString(),this.injectNum.text=PlayerManager.injectNum.toString();var e=parseInt(PlayerManager.totalRound)-parseInt(PlayerManager.leftRound);this.surplusTime.text=e+1+"/"+PlayerManager.totalRound,PlayerManager.seatDown?this.chatGroup.visible=!0:this.chatGroup.visible=!1,PlayerManager.isHidden=!1,0==PlayerManager.isCanLookCard?(this.turnCardRect.touchEnabled=!1,this.otherCardTips6.visible=!1):0!=this.player.seatNo&&(this.turnCardRect.touchEnabled=!0,this.otherCardTips6.visible=!0),this.followInjectBtn.label=PlayerManager.followScore+""},t.prototype.continueGame=function(){null!=this.smallScore&&(this.smallScore.visible=!1);var e=parseInt(PlayerManager.totalRound)-parseInt(PlayerManager.leftRound);this.surplusTime.text=e+1+"/"+PlayerManager.totalRound,this.initGameInfo()},t.prototype.onRemove=function(){WebsocketEngine.getInstance().removeEventListener(NetEvent.RECEVICEMESSAGE,this.onWebSocketReceive,this)},t}(BaseUI);__reflect(GameRoomView.prototype,"GameRoomView");var LoginView=function(e){function t(t){void 0===t&&(t=0);var a=e.call(this)||this;return a.loadType=t,a.skinName=LoginViewSkin,a}return __extends(t,e),t.prototype.addStage=function(){this.name="loginView",WebsocketEngine.getInstance().addEventListener(NetEvent.CLOSESOCKET,this.onWebSocketClose,this),WebsocketEngine.getInstance().addEventListener(NetEvent.RECEVICEMESSAGE,this.onWebSocketReceive,this),WebsocketEngine.getInstance().addEventListener(NetEvent.OPENSOCKET,this.onWebSocketOpen,this),this.initClickFuc(),this.getWindowInfo(),this.initLoginView(this.loadType)},t.prototype.initClickFuc=function(){this.joinRoom.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickJoinRoom,this),this.creatRoom.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickCreateRoom,this),this.move.addEventListener(egret.Event.COMPLETE,this.onTweenGroupComplete,this)},t.prototype.onTweenGroupComplete=function(e){e.target;this.move.stop(),this.move.play(0)},t.prototype.clickJoinRoom=function(){""!=this.JoinRoomLabel.text&&this.sendJoinRoomData()},t.prototype.clickCreateRoom=function(){var e={cmd:"161003",roundTime:1,xiaZhuScore:1,maxSocre:1};WebsocketEngine.getInstance().sendData(e)},t.prototype.onWebSocketReceive=function(e){var t=e.data,a=t,n=parseInt(a.cmd);switch(a.errorCode&&(n=parseInt(a.errorCode)),n){case 101002:break;case 100006:this.initPlayer(a.player),this.sendBreakLine();break;case 161003:PlayerManager.roomId=a.room.roomId;var i=a.room.xiaZhuScore;PlayerManager.injectNum=i[0],PlayerManager.maxInjectNum=i[3];var r=a.room.endGameTime.substring(11,16);PlayerManager.roomEndTime=r,a.isAA?PlayerManager.isAA=!0:PlayerManager.isAA=!1,SceneManager.getInstance().dispatchEvent(new StageEvent(StageEvent.VIEW_ADDED,"gameRoomView"));break;case 161004:PlayerManager.roomId=a.room.roomId;var o=a.room.xiaZhuScore,s=a.room.endGameTime.substring(11,16);PlayerManager.roomEndTime=s,PlayerManager.injectNum=o[0],PlayerManager.maxInjectNum=o[3],a.isAA?PlayerManager.isAA=!0:PlayerManager.isAA=!1,PlayerInfoCache.getInstance().addCommandCache(t),SceneManager.getInstance().dispatchEvent(new StageEvent(StageEvent.VIEW_ADDED,"gameRoomView"));break;case 161001:this.creatRoom.visible=!1,this.joinRoom.visible=!1,this.JoinRoomLabel.visible=!1,this.showBreakLineInfo(a),SceneManager.getInstance().dispatchEvent(new StageEvent(StageEvent.VIEW_ADDED,"gameRoomView"));break;case 1610010:var c={};c.loadType=1,c.message="游戏已经结束,返回大厅重新开局吧!",c.okFun=this.backHome,c.titleType=1,TipsManager.getInStance().dispatchEvent(new StageEvent(StageEvent.VIEW_TIPS,c));break;default:return}},t.prototype.backHome=function(){var e="http://daheng.vequn.org";window.location.href=decodeURI(e)},t.prototype.sendBreakLine=function(){var e={cmd:"161001",roleId:PlayerManager.id};WebsocketEngine.getInstance().sendData(e)},t.prototype.showBreakLineInfo=function(e){PlayerManager.isBreakLine=!0,PlayerManager.roomId=e.roomId,PlayerManager.injectNum=parseInt(e.diZhuScore);var t=e.xiaZhuScore;console.log("xiaZhuScore:"+e.xiaZhuScore+"!!!"),PlayerManager.injectNum=parseInt(t[0]),PlayerManager.maxInjectNum=parseInt(t[3]),10==parseInt(e.roundCount)?PlayerManager.gold="60":15==parseInt(e.roundCount)?PlayerManager.gold="70":20==parseInt(e.roundCount)?PlayerManager.gold="80":PlayerManager.gold="100",PlayerInfoCache.getInstance().addCommandCache(e),WeixinUtil.getInstance().initWeixinInfo("大亨炸金花","我再房间号:"+PlayerManager.roomId+"等您一战",PlayerManager.roomId+"",function(){})},t.prototype.getWindowInfo=function(){var e=Utils.getWindowInfo();if(null==e){var t={};return t.loadType=1,t.message="您的网络错误！！！",t.okFun=Configs.backTohall(),1==t.titleType,void TipsManager.getInStance().dispatchEvent(new StageEvent(StageEvent.VIEW_TIPS,t))}PlayerManager.roomId=e.roomId,PlayerManager.openid=e.openId,PlayerManager.id=e.id},t.prototype.initPlayer=function(e){var t=new PlayerVo;t.nickName=e.nickname,t.openid=e.openId,t.isMine=!0,t.headImageUrl=e.headImgUrl,t.gold=e.gold,"1"==e.sex?t.sex=!0:t.sex=!1,t.id=e.roleId,PlayerInfoCache.getInstance().addPlayer(t)},t.prototype.onWebSocketClose=function(){1==this.loadType&&WebsocketEngine.getInstance().connectScocket()},t.prototype.sendJoinRoomData=function(){if(0==this.loadType){var e={cmd:"161004",roomId:this.JoinRoomLabel.text,roleId:PlayerManager.id};WebsocketEngine.getInstance().sendData(e)}},t.prototype.onWebSocketOpen=function(){var e={cmd:"101002",roleId:PlayerManager.id};WebsocketEngine.getInstance().sendData(e)},t.prototype.onRemove=function(){WebsocketEngine.getInstance().removeEventListener(NetEvent.CLOSESOCKET,this.onWebSocketClose,this),WebsocketEngine.getInstance().removeEventListener(NetEvent.OPENSOCKET,this.onWebSocketOpen,this),WebsocketEngine.getInstance().removeEventListener(NetEvent.RECEVICEMESSAGE,this.onWebSocketReceive,this)},t.prototype.initLoginView=function(e){var t=this;switch(PlayerInfoCache.getInstance().commandCache=[],e){case 0:WebsocketEngine.getInstance().connectScocket(),this.showJoinGameTips(1),this.move.play(0);break;case 1:egret.Tween.get(this).to(null,50).call(function(){WebsocketEngine.getInstance().connectScocket(),t.showJoinGameTips(2),t.move.play(0)})}},t.prototype.showJoinGameTips=function(e){1==e?(this.tips3.text="进",this.tips4.text="入"):2==e&&(this.tips3.text="恢",this.tips4.text="复")},t}(BaseUI);__reflect(LoginView.prototype,"LoginView");var LookPlayerHeadSinView=function(e){function t(){var t=e.call(this)||this;return t.skinName="LookPlayerHeadSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.setLookPlayerHeadImg(e)},t.prototype.setLookPlayerHeadImg=function(e){var t=this.lookPlayerHeadInfoGroup,a=t.getChildByName("headImg");"/0"==e.headImgUrl?a.source="http://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKKQ0vBuCoeQENQIh61FsW4Prdib51iabdneFmMYB3QTLvqia81DVibENxGmD7WyACk72k82T6eUYzWvg/0":a.source=e.headImgUrl,a.mask=this.headMask;var n=t.getChildByName("nickName");n.text=e.nickname,n.width=90,n.height=22},t}(eui.ItemRenderer);__reflect(LookPlayerHeadSinView.prototype,"LookPlayerHeadSinView");var MenuView=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/skin/View/MenuViewSkin.exml",t.addEventListener(eui.UIEvent.CREATION_COMPLETE,t.init,t),t}return __extends(t,e),t.prototype.init=function(){this.menuRect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeMenu,this),this.gameWay.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showGameWay,this),this.shareGame.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showShare,this),this.gameTop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showGameTop,this),this.dissolveGame.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showDissolveTips,this),this.standUpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sendStandUpMsg,this),this.lookPlayerBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sendLookPlayerMsg,this),this.backRoom.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backHome,this),this.gameSet.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showGameSet,this),this.playerWayCloseBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeMenu,this),this.initMenu()},t.prototype.showGameSet=function(){var e=this;null==this.soundView&&(this.soundView=new SoundSetView),RES.getResAsync("setImg_json",function(){e.addChild(e.soundView)},this),this.closeMenu()},t.prototype.hideGameSet=function(){this.soundView.parent&&(this.soundView.parent.removeChild(this.soundView),this.soundView=null)},t.prototype.backHome=function(){var e={};e.loadType=3,e.message="您确定要返回大厅吗？",e.okFun=this.parent.backRoom,e.cancelFun=null,e.titleType=1,TipsManager.getInStance().dispatchEvent(new StageEvent(StageEvent.VIEW_TIPS,e)),this.closeMenu()},t.prototype.initMenu=function(){var e=PlayerInfoCache.getInstance().getMe();this.hideAll(!0),this.menuGroup.visible=!0,this.gameWayGroup.visible=!1,PlayerManager.seatDown?(this.standUpBtn.touchEnabled=!0,this.standUpBtn.alpha=1):(this.standUpBtn.touchEnabled=!1,this.standUpBtn.alpha=.5),this.backRoom.touchEnabled=PlayerManager.isGameState<2?!0:!1,this.backRoom.alpha=PlayerManager.isGameState<2?1:.5,PlayerManager.isGameStart&&0!=e.seatNo?(this.dissolveGame.getChildAt(0).source="jiesanRoom_png",this.dissolveGame.name="dissolve",this.dissolveGame.touchEnabled=!0,this.dissolveGame.alpha=1):1==PlayerManager.roomMasterType?(this.dissolveGame.getChildAt(0).source="jiesanRoom_png",this.dissolveGame.name="dissolve",this.dissolveGame.touchEnabled=!0,this.dissolveGame.alpha=1):(this.dissolveGame.getChildAt(0).source="jiesanRoom_png",this.dissolveGame.name="dissolve",this.dissolveGame.touchEnabled=!1,this.dissolveGame.alpha=.5)},t.prototype.sendLookPlayerMsg=function(){var e={cmd:"271080"};WebsocketEngine.getInstance().sendData(e),this.closeMenu()},t.prototype.sendStandUpMsg=function(){var e=PlayerInfoCache.getInstance().getMe(),t={cmd:"271016",seat:e.seatNo,roleId:PlayerManager.id,roomId:PlayerManager.roomId};WebsocketEngine.getInstance().sendData(t),this.closeMenu()},t.prototype.showDissolveTips=function(e){if(PlayerManager.isGameStart)"backHome"==e.currentTarget.name?this.backHome():this.setDissolveInfo(2);else{PlayerInfoCache.getInstance().getMe();1==PlayerManager.roomMasterType?this.setDissolveInfo(1):this.backHome()}this.closeMenu()},t.prototype.setDissolveInfo=function(e){var t={};t.loadType=3,1==e?t.message="游戏还未开始，解散房间将退还所消费房卡，是否解散房间？":t.message="解散房间需要征得所有在线玩家同意，是否解散房间？",t.okFun=this.roomMasterSendDissolveRoom,t.cancelFun=null,t.titleType=2,TipsManager.getInStance().dispatchEvent(new StageEvent(StageEvent.VIEW_TIPS,t))},t.prototype.sendDissolveRoomMsg=function(){var e={cmd:"271009",roleId:PlayerManager.id,roomId:PlayerManager.roomId};WebsocketEngine.getInstance().sendData(e)},t.prototype.roomMasterSendDissolveRoom=function(){var e={cmd:"271009",roleId:PlayerManager.id,roomId:PlayerManager.roomId,agree:!0};WebsocketEngine.getInstance().sendData(e)},t.prototype.closeMenu=function(){this.parent.hideMenu()},t.prototype.hideAll=function(e){this.menuRect.visible=e,this.gameWayGroup.visible=e},t.prototype.showGameWay=function(){var e=this;RES.getResAsync("gameWay_json",function(){e.menuGroup.visible=!1,e.gameWayGroup.visible=!0},this)},t.prototype.showShare=function(){this.parent.hideMenu(),null==this.share&&(this.share=new ShareTopView),this.addChild(this.share),this.share.show(1),PlayerManager.initWxShare()},t.prototype.showGameTop=function(){this.parent.hideMenu(),null==this.share&&(this.share=new ShareTopView),this.addChild(this.share),this.share.show(2)},t}(eui.Component);__reflect(MenuView.prototype,"MenuView");var PlayerInfoView=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.CREATION_COMPLETE,t.init,t),t.skinName="resource/skin/View/PlayerInfoSkin.exml",t}return __extends(t,e),t.prototype.init=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this),this.closeRect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},t.prototype.close=function(){this.parent.playerInfo.visible=!1},t.prototype.setPlayerInfo=function(e){var t=this.infoGroup,a=this.headUrlImgGroup,n=a.getChildByName("headUrl");"/0"==e.headImageUrl?n.source="http://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKKQ0vBuCoeQENQIh61FsW4Prdib51iabdneFmMYB3QTLvqia81DVibENxGmD7WyACk72k82T6eUYzWvg/0":n.source=e.headImageUrl;var i=t.getChildByName("Nick_name");i.text="昵称："+e.nickName;var r=t.getChildByName("I_D");r.text="ID  ："+e.roleId;var o=t.getChildByName("Local");o.text="位置："+e.local;var s=t.getChildByName("I_P");s.text="IP  ："+e.ip},t}(eui.Component);__reflect(PlayerInfoView.prototype,"PlayerInfoView");var PlayerView=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/skin/View/PlayerSkin.exml",t}return __extends(t,e),t.prototype.setBoomWinOrLoseScore=function(e,t){this.boomScore.visible=!0,t>0&&7>t?this.boomScore.textAlign="left":this.boomScore.textAlign="right",e>0?(this.boomScore.textColor=16711680,this.boomScore.text="+"+e):(this.boomScore.textColor=3014400,this.boomScore.text=""+e)},t.prototype.setPlayerInfo=function(e){var t=this.playerGroup;this.playerInfo.visible=!0;var a=this.playerInfo,n=t.getChildByName("head");"/0"==e.headImageUrl?n.source="http://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKKQ0vBuCoeQENQIh61FsW4Prdib51iabdneFmMYB3QTLvqia81DVibENxGmD7WyACk72k82T6eUYzWvg/0":n.source=e.headImageUrl,n.mask=this.headMask;var i=a.getChildByName("nickName");i.text=e.nickName;var r=a.getChildByName("score");r.text=e.score+"",r.textAlign="center"},t.prototype.initPlayerScore=function(e){this.playerInfo.visible=!0;var t=this.playerInfo,a=t.getChildByName("score");a.text=e+"",a.textAlign="center"},t.prototype.setBreakLine=function(e){this.breakLine.visible=!e},t.prototype.hidePlayerInfo=function(){var e=this.playerGroup,t=this.playerInfo,a=e.getChildByName("head");1==PlayerManager.seatDown?(a.source="yaoqing_png",this.playerInfo.visible=!1):a.source="headSeat1_png",a.mask=this.headMask;var n=t.getChildByName("nickName");n.text="";var i=t.getChildByName("score");i.text="",i.textAlign="center",this.readImg.visible=!1},t.prototype.showReadImg=function(e,a){this.readImg.visible=a,e>3&&7>e?this.currentState=t.RIGTH:e>0&&4>e&&(this.currentState=t.LEFT)},t.RIGTH="rigth",t.DOWN="down",t.LEFT="left",t}(eui.Component);__reflect(PlayerView.prototype,"PlayerView");var RecordSinView=function(e){function t(){var t=e.call(this)||this;return t.skinName="RecoredSinViewSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;PlayerInfoCache.getInstance().getMe();e.headImg?(this.sinGroup.visible=!0,this.ownGroup.visible=!1,this.initPlayerInfo(e),this.initLastScore(e),this.initCards(e)):(this.sinGroup.visible=!1,this.ownGroup.visible=!0,this.initTotalScore(e),this.initOwnCards(e))},t.prototype.initOwnCards=function(e){if(0!=e.cards.length){var t=(e.cards,e.cards);this.ownCardGroup.removeChildren();for(var a=Cards.getCardsForList(t,!1),n=a.length,i=0;n>i;i++){var r=a[i].getCardUI();this.ownCardGroup.addChild(r),r.initCardData(a[i],1)}}},t.prototype.initCards=function(e){if(0!=e.cards.length){var t=(e.cards,e.cards);this.cardGroup.removeChildren();for(var a=Cards.getCardsForList(t,!1),n=a.length,i=0;n>i;i++){var r=a[i].getCardUI();this.cardGroup.addChild(r),r.initCardData(a[i],1)}}},t.prototype.initPlayerInfo=function(e){var t=this.sinGroup,a=t.getChildByName("nickName");a.text=e.nickName},t.prototype.initTotalScore=function(e){var t=this.ownGroup,a=t.getChildByName("ownScore");parseInt(e.score)>0?a.text="+"+e.score:a.text=e.score;var n=t.getChildByName("ownNickName");n.text=e.nickName},t.prototype.initLastScore=function(e){var t=this.sinGroup,a=t.getChildByName("score");parseInt(e.score)>0?a.text="+"+e.score:a.text=e.score},t.prototype.getCardType=function(e){var t="";switch(e){case-1:t="弃牌";break;case 0:t="高牌";break;case 1:t="对子";break;case 2:t="顺子";break;case 3:t="同花";break;case 4:t="同花顺";break;case 5:t="豹子";break;default:return}return t},t}(eui.ItemRenderer);__reflect(RecordSinView.prototype,"RecordSinView");var RecordView=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.COMPLETE,t.init,t),t.skinName=RecordViewSKin,t}return __extends(t,e),t.prototype.init=function(){RES.getResAsync("record_json",function(){},this),this.recordRect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeRecordView,this),this.LastGame.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sendLastGameMsg,this),this.RecoredGame.addEventListener(egret.TouchEvent.TOUCH_TAP,this.sendTotalGameMsg,this),this.closeGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeRecordView,this)},t.prototype.sendTotalGameMsg=function(){var e={cmd:"271061",roleId:PlayerManager.id};WebsocketEngine.getInstance().sendData(e)},t.prototype.sendLastGameMsg=function(){var e={cmd:"271060",roleId:PlayerManager.id};WebsocketEngine.getInstance().sendData(e),this.LastGame.selected=!0,this.RecoredGame.selected=!1},t.prototype.showLastGameView=function(e){this.recordGroup.visible=!0,this.lookPlayerGroup.visible=!1;null==e.LastRecords||0==e.LastRecords.length?(this.tips.visible=!0,this.recoredLisk.visible=!1):(this.tips.visible=!1,this.recoredLisk.visible=!0,this.recoredLisk.dataProvider=new eui.ArrayCollection(e.LastRecords),this.recoredLisk.itemRenderer=RecordSinView)},t.prototype.showTotalGameView=function(e){return this.recordGroup.visible=!0,this.lookPlayerGroup.visible=!1,null==e.lastRecords||0==e.lastRecords.length?(this.tips.visible=!0,void(this.recoredLisk.visible=!1)):(this.tips.visible=!1,this.recoredLisk.visible=!0,this.recoredLisk.dataProvider=new eui.ArrayCollection(e.lastRecords),this.recoredLisk.itemRenderer=RecordSinView,void 0)},t.prototype.showLookPlayer=function(e){return this.recordGroup.visible=!1,this.lookPlayerGroup.visible=!0,this.lookPlayerNum.text="围观（"+e.watchPlayers.length+"）",null==e.watchPlayers||0==e.watchPlayers.length?void this.lookPlayerList.removeChildren():(this.lookPlayerList.visible=!0,this.lookPlayerList.dataProvider=new eui.ArrayCollection(e.watchPlayers),this.lookPlayerList.itemRenderer=LookPlayerHeadSinView,void 0)},t.prototype.closeRecordView=function(){this.parent.hideRecordView()},t}(eui.Component);__reflect(RecordView.prototype,"RecordView");var RecordVoiceView=function(e){function t(){var t=e.call(this)||this;
return t.addEventListener(eui.UIEvent.CREATION_COMPLETE,t.init,t),t.skinName="resource/skin/View/RecordVoiceViewSkin.exml",t}return __extends(t,e),t.prototype.init=function(){this.voice.addEventListener(egret.Event.COMPLETE,this.onTweenGroupComplete,this)},t.prototype.onTweenGroupComplete=function(e){e.target;this.voice.stop(),this.voice.play(0)},t}(eui.Component);__reflect(RecordVoiceView.prototype,"RecordVoiceView");var ShareTopView=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/skin/View/ShareTopViewSkin.exml",t.addEventListener(eui.UIEvent.CREATION_COMPLETE,t.init,t),t}return __extends(t,e),t.prototype.init=function(){this.shareRect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeShare,this)},t.prototype.closeShare=function(){this.parent.removeChild(this),egret.Tween.removeTweens(this.shareIco)},t.prototype.show=function(e){var t=this;1==e?RES.getResAsync("shareImg_png",function(){t.gameShareImg.source="shareImg_png"},this):2==e?RES.getResAsync("gameTopImg_png",function(){t.gameShareImg.source="gameTopImg_png"},this):3==e&&RES.getResAsync("recordShareImg_png",function(){t.gameShareImg.source="recordShareImg_png"},this),this.showSharIco()},t.prototype.showSharIco=function(){var e=new eui.Image;e=this.shareIco,egret.Tween.get(e,{loop:!0}).to({y:45}).to({y:25},400).to({y:45},100)},t}(eui.Component);__reflect(ShareTopView.prototype,"ShareTopView");var SmallSinTotalScoreView=function(e){function t(){var t=e.call(this)||this;return t.skinName="SmallSinTotalScoreSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.initCardGroup(e),this.init(e)},t.prototype.initCardGroup=function(e){var t=e.cards,a=[];if("1"!=e.isQiPai&&0!=t.length){this.totalCardGroup.removeChildren();for(var n=0;3>n;n++){var i=4*(t[n].number-1)+t[n].flower;a.push(i)}for(var r=Cards.getCardsForList(a,!1),o=r.length,s=0;o>s;s++){var c=r[s].getCardUI();this.totalCardGroup.addChild(c),c.initCardData(r[s],1)}}},t.prototype.init=function(e){var t=this.smallTotalScore,a=t.getChildByName("nickName");a.text=e.nickname;var n=t.getChildByName("headImg");"/0"==e.headImgUrl?n.source="http://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKKQ0vBuCoeQENQIh61FsW4Prdib51iabdneFmMYB3QTLvqia81DVibENxGmD7WyACk72k82T6eUYzWvg/0":n.source=e.headImgUrl,n.mask=this.headRect;var i=t.getChildByName("score");parseInt(e.winOrLoseScore)>0?(i.text="+"+e.winOrLoseScore,i.textColor=13107045):(i.text=e.winOrLoseScore,i.textColor=16737637);var r=t.getChildByName("cardType"),o=this.getCardType(parseInt(e.cardType));r.text=o,"1"==e.winOrLose&&(this.winImg.visible=!0)},t.prototype.getCardType=function(e){var t="";switch(e){case-1:t="弃牌";break;case 0:t="高牌";break;case 1:t="对子";break;case 2:t="顺子";break;case 3:t="同花";break;case 4:t="同花顺";break;case 5:t="豹子"}return t},t}(eui.ItemRenderer);__reflect(SmallSinTotalScoreView.prototype,"SmallSinTotalScoreView");var SmallTotalScoreView=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(eui.UIEvent.COMPLETE,t.init,t),t.skinName=SmallTotalScoreSkin,t}return __extends(t,e),t.prototype.init=function(){var e=this;RES.getResAsync("totalScoreBg_png",function(){e.bg.source="totalScoreBg_png"},this),this.continueBtn.touchEnabled=!0,this.continueBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.continueGame,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},t.prototype.close=function(){this.parent.smallScore.visible=!1},t.prototype.continueGame=function(){this.continueBtn.touchEnabled=!1;var e={cmd:"271126",roleId:PlayerManager.id,roomId:PlayerManager.roomId},t=PlayerInfoCache.getInstance().getMe();0==t.seatNo?this.parent.continueGame():(WebsocketEngine.getInstance().sendData(e),this.close())},t.prototype.setSmallScore=function(e){var t=PlayerInfoCache.getInstance().getLocalSeatNoBySeatNo(e.winSeat),a=PlayerInfoCache.getInstance().getPlayerByLocalSeatno(t),n=PlayerInfoCache.getInstance().getMe();a.id==n.id?(this.winOrLose.source="won_png",PlayerSoundManager.getInstance().playButtonSound("sound_win")):(this.winOrLose.source="lose_png",PlayerSoundManager.getInstance().playButtonSound("sound_fail")),this.totalScoreList.dataProvider=new eui.ArrayCollection(e.playerList),this.totalScoreList.itemRenderer=SmallSinTotalScoreView},t}(eui.Component);__reflect(SmallTotalScoreView.prototype,"SmallTotalScoreView");var SoundSetView=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/skin/View/SoundSetViewSkin.exml",t.addEventListener(eui.UIEvent.CREATION_COMPLETE,t.init,t),t}return __extends(t,e),t.prototype.init=function(){this.initClick(),this.musicBtn.selected=!PlayerManager.gameMusicOn,this.effecBtn.selected=!PlayerManager.gameEffectOn},t.prototype.initClick=function(){this.musicBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickMusicGroup,this),this.effecBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickEffectGroup,this),this.soundSetRect.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSoundSetView,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeSoundSetView,this)},t.prototype.clickMusicGroup=function(){PlayerManager.gameMusicOn=!this.musicBtn.selected;var e=PlayerManager.gameMusicOn?"1":"0";egret.localStorage.setItem("isMusicVol_six",e),PlayerManager.gameMusicOn?(SoundManager.getInstance().musicVolume=1,SoundManager.getInstance().playMusic("bgMusic")):(SoundManager.getInstance().stopMusic(),SoundManager.getInstance().musicVolume=0)},t.prototype.clickEffectGroup=function(){PlayerManager.gameEffectOn=!this.effecBtn.selected;var e=PlayerManager.gameEffectOn?"1":"0";egret.localStorage.setItem("isSoundVol_six",e),PlayerManager.gameEffectOn?SoundManager.getInstance().soundVolume=1:SoundManager.getInstance().soundVolume=0},t.prototype.closeSoundSetView=function(){this.parent&&this.parent.removeChild(this)},t}(eui.Component);__reflect(SoundSetView.prototype,"SoundSetView");var StageView=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.COMPLETE,t.onUiComplete,t),t.addEventListener(egret.Event.REMOVED,t.onRemoved,t),t.skinName=StageViewSkin,t}return __extends(t,e),t.prototype.onUiComplete=function(){SceneManager.getInstance().parentView=this.viewGroup,SceneManager.getInstance().addEventListener(StageEvent.VIEW_ADDED,this.viewAdd,this),TipsManager.getInStance().addEventListener(StageEvent.VIEW_TIPS,this.onShowTips,this),TipsManager.getInStance().addEventListener(StageEvent.UPDATE_NUMS,this.updateNums,this),TipsManager.getInStance().addEventListener(StageEvent.HIDE_BTN,this.hideBtn,this),this.addGameRoomView(0)},t.prototype.viewAdd=function(e){var t=e.data+"";switch(t){case SceneManager.LOGIN_NAME:this.addLoginView(0);break;case SceneManager.GAMEROOM_NAME:this.addGameRoomView(0)}},t.prototype.onShowTips=function(e){var t=e.data;this.showTipsView(t)},t.prototype.updateNums=function(e){var t=e.data;this.showDissolveNums(t)},t.prototype.hideBtn=function(e){this.tipsView.btnGroup.visible=!1},t.prototype.onRemoved=function(){this.removeEventListener(egret.Event.COMPLETE,this.onUiComplete,this),this.removeEventListener(egret.Event.REMOVED,this.onRemoved,this)},t.prototype.addLoginView=function(e){SceneManager.getInstance().addView(SceneManager.LOGIN_NAME,e)},t.prototype.addGameRoomView=function(e){SceneManager.getInstance().addView(SceneManager.GAMEROOM_NAME,e)},t.prototype.showTipsView=function(e){this.tipsGroup.removeChildren(),this.tipsView=new TipsView(e),this.tipsGroup.addChild(this.tipsView)},t.prototype.showDissolveNums=function(e){this.tipsView.setPeople(e)},t.prototype.backToHall=function(){Configs.backTohall()},t}(eui.Component);__reflect(StageView.prototype,"StageView");var TipsView=function(e){function t(t){var a=e.call(this)||this;return a.timer=new egret.Timer(10),a.cutTime=PlayerManager.dissolveTime/10,a.data=t,a.skinName=TipsViewSkin,a}return __extends(t,e),t.prototype.addStage=function(){this.btn_ok.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkClick,this),this.btn_cancel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCancelClick,this),this.timer.addEventListener(egret.TimerEvent.TIMER,this.updateDissolveTime,this),this.dissolveTextGroup.visible=!1,this.initTipsData(),0==this.data.loadType&&(this.bgRect.visible=!1),this.initTipsView(this.loadType),this.setTitle(this.titleType)},t.prototype.setPeople=function(e){var t=PlayerInfoCache.getInstance().getPlayerById(e.roleId);if(1==e.type){this.dissolveTextGroup.visible=!0,t.nickName+=t.nickName;var a=t.nickName.length;this.txt_msg.text=a>6?t.nickName.substring(0,7)+"...申请立即解散牌局":t.nickName+"申请立即解散牌局"}var n=PlayerInfoCache.getInstance().getPlayerSize();this.agreeNum.text=e.num+"/"+n,this.isAgree.text=Math.floor(n/2)+1+"人同意解散即可"},t.prototype.initTipsData=function(){var e=this.data;this.loadType=e.loadType,this.okFun=e.okFun,this.cancelFun=e.cancelFun,this.tipsMessage=e.message,this.titleType=e.titleType},t.prototype.updateDissolveTime=function(){return this.cutTime<=0?void this.timer.stop():(this.cutTime-=2,void this.initTime())},t.prototype.initTime=function(){var e=this.cutTime;this.bar.width=608/1500*e},t.prototype.setTitle=function(e){1==e?this.title.source="gameTip_png":2==e&&(this.title.source="dissolveTitle_png")},t.prototype.onOkClick=function(){null!=this.okFun&&this.okFun(),0==this.loadType||1==this.loadType?this.hide(1):3==this.loadType?(this.timer.start(),this.btnGroup.visible=!1,this.hide(1)):this.btnGroup.visible=!1},t.prototype.onCancelClick=function(){this.cancelFun&&this.cancelFun(),0==this.loadType||1==this.loadType?this.hide(1):3==this.loadType?(this.timer.start(),this.btnGroup.visible=!1,this.hide(1)):this.btnGroup.visible=!1},t.prototype.initTipsView=function(e){var t=this;switch(RES.getResAsync("chatbg1_png",function(){t.bg.source="chatbg1_png"},this),0==this.loadType?(this.tipsGroup1.visible=!1,this.tipsGroup2.visible=!0,this.tip_msg.text=this.tipsMessage):(this.tipsGroup1.visible=!0,this.tipsGroup2.visible=!1,this.txt_msg.text=this.tipsMessage),e){case 0:egret.Tween.get(this.tipsGroup2).wait(1500).to({alpha:0},1500).call(function(){t.hide(1)});break;case 1:this.btnGroup.visible=!0,this.btn_ok.visible=!0,this.btn_cancel.visible=!1,this.btn_ok.horizontalCenter=0,this.dissolveTextGroup.visible=!1;break;case 2:this.btnGroup.visible=!0,this.btn_ok.visible=!0,this.btn_cancel.visible=!0,this.dissolveTextGroup.visible=!0,this.timer.start();break;case 3:this.btnGroup.visible=!0,this.btn_ok.visible=!0,this.btn_cancel.visible=!0;break;case 4:this.btnGroup.visible=!1,this.dissolveTextGroup.visible=!0}},t.prototype.onRemove=function(){this.btn_ok.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onOkClick,this),this.btn_cancel.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCancelClick,this)},t}(BaseUI);__reflect(TipsView.prototype,"TipsView");var IframeManager=function(e){function t(){var t=e.call(this)||this;return t.breakAllNetMessage=!1,t.addEventListener(egret.Event.ENTER_FRAME,t.onAactivityRun,t),window.addEventListener("message",t.getMessage,!1),t}return __extends(t,e),t.getInstance=function(){return null==this.ins&&(this.ins=new t),this.ins},t.prototype.onAactivityRun=function(){},t.prototype.getMessage=function(e){console.log("yxgetMessage",e.data),(181060==e.data.cmd||271240==e.data.cmd)&&console.log(JSON.stringify(e.data));var a=Utils.getWindowInfo();if(null==a){var n={};return n.loadType=1,n.message="您的网络错误！！！",n.okFun=Configs.backTohall(),1==n.titleType,void TipsManager.getInStance().dispatchEvent(new StageEvent(StageEvent.VIEW_TIPS,n))}PlayerManager.id=a.roleId,console.log("收到iframe的消息>>>>>>>>",e,e.data);var i=e.data;if(e.data.forLobby){var r=null;switch(console.log(">>>>>>>>>",e.data.cmd),e.data.cmd){case NetConstant.READY:var o={cmd:271001,roleId:PlayerManager.id};WebsocketEngine.getInstance().sendData(o);break;case NetConstant.SHARE_SUCCESS:break;case NetConstant.SHARE_FAIL:break;case NetConstant.SHARE_CANCEL:break;case NetConstant.STOP_RECORD_SUCCESS:r=e.data.localId;break;case NetConstant.STOP_RECORD_FAIL:break;case NetConstant.UPLOAD_VOICE_SUCCESS:r=e.data.serverId;break;case NetConstant.UPLOAD_VOICE_FAIL:break;case NetConstant.START_RECORD_SUCCESS:break;case NetConstant.START_RECORD_FAIL:break;case NetConstant.DOWNLOAD_VOICE_SUCCESS:r=e.data.localId;break;case NetConstant.DOWNLOAD_VOICE_FAIL:break;case NetConstant.PLAY_VOICE_SUCCESS:break;case NetConstant.PLAY_VOICE_FAIL:break;case NetConstant.OFFLINE:}t.getInstance().dispatchEventWith(e.data.cmd,!1,r)}else{if(this.breakAllNetMessage)return;WebsocketEngine.getInstance().dispatchEvent(new NetEvent(NetEvent.RECEVICEMESSAGE,i))}},t.prototype.sendMessage=function(e){console.log("发送消息到iframe>>>>>>",e),window.parent.postMessage(e,"*")},t.prototype.getDataByParent=function(){},t.prototype.sendToParent=function(){},t.prototype.getDataFromIframe=function(){this.sendMessage({forLobby:!0,cmd:"room"})},t.prototype.flushFrame=function(){this.sendMessage({forLobby:!0,cmd:"refresh"})},t.prototype.backToHall=function(){this.sendMessage({forLobby:!0,cmd:"close"})},t.prototype.sendUILoadFinish=function(){this.sendMessage({forLobby:!0,cmd:"ready"})},t.prototype.sendProgress=function(e){this.sendMessage({forLobby:!0,cmd:"loading",percent:e})},t.prototype.startRecord=function(){this.sendMessage({forLobby:!0,cmd:"wx",func:"startRecord"})},t.prototype.stopRecord=function(e){void 0===e&&(e=0),this.sendMessage({forLobby:!0,cmd:"wx",func:"stopRecord",type:e})},t.prototype.downloadRecord=function(e){this.sendMessage({forLobby:!0,cmd:"wx",func:"downloadVoice",serverId:e})},t.prototype.playRecord=function(e){this.sendMessage({forLobby:!0,cmd:"wx",func:"playVoice",serverId:e})},t.prototype.initWxShare=function(e,t,a){this.sendMessage({forLobby:!0,cmd:"wx",func:"initShare",title:e,desc:t,imgUrl:a})},t}(eui.Component);__reflect(IframeManager.prototype,"IframeManager");var NetConstant=function(){function e(){}return e.READY="ready",e.SHARE_SUCCESS="shareSuccess",e.SHARE_FAIL="shareFail",e.SHARE_CANCEL="shareCancel",e.STOP_RECORD_SUCCESS="stopRecordSuccess",e.STOP_RECORD_FAIL="stopRecordFail",e.UPLOAD_VOICE_SUCCESS="uploadVoiceSuccess",e.UPLOAD_VOICE_FAIL="uploadVoiceFail",e.START_RECORD_SUCCESS="startRecordSuccess",e.START_RECORD_FAIL="startRecordFail",e.DOWNLOAD_VOICE_SUCCESS="downloadVoiceSuccess",e.DOWNLOAD_VOICE_FAIL="downloadVoiceFail",e.PLAY_VOICE_SUCCESS="playVoiceSuccess",e.PLAY_VOICE_FAIL="playVoiceFail",e.OFFLINE="offline",e}();__reflect(NetConstant.prototype,"NetConstant");var WebsocketEngine=function(e){function t(){var t=e.call(this)||this;return t.closeWebsocketWay=0,t.connectIP="192.168.3.250",t.connectPORT=9001,t}return __extends(t,e),t.getInstance=function(){return null==this.ins&&(this.ins=new t),this.ins},t.prototype.connectScocket=function(){null==this.websocket&&(this.websocket=new egret.WebSocket,this.websocket.type=egret.WebSocket.TYPE_STRING,this.websocket.hasEventListener(egret.ProgressEvent.SOCKET_DATA)||this.websocket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this.websocket.hasEventListener(egret.Event.CONNECT)||this.websocket.addEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this.websocket.hasEventListener(egret.Event.CLOSE)||this.websocket.addEventListener(egret.Event.CLOSE,this.onSocketClose,this),this.websocket.hasEventListener(egret.IOErrorEvent.IO_ERROR)||this.websocket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketError,this),console.log("-------------------链接："+this.connectIP+":"+this.connectPORT+"------------------"),this.websocket.connect(this.connectIP,this.connectPORT))},t.prototype.socketIsConnected=function(){return null!=this.websocket?this.websocket.connected:!1},t.prototype.closeWebsocket=function(e){void 0===e&&(e=1),this.closeWebsocketWay=e,null!=this.websocket&&this.websocket.connected&&this.websocket.close()},t.prototype.removeEventListeners=function(){null!=this.websocket&&(this.websocket.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this.websocket.removeEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this.websocket.removeEventListener(egret.Event.CLOSE,this.onSocketClose,this),this.websocket.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketError,this),this.websocket=null)},t.prototype.onReceiveMessage=function(){var e=JSON.parse(this.websocket.readUTF());t.getInstance().dispatchEvent(new NetEvent(NetEvent.RECEVICEMESSAGE,e))},t.prototype.sendData=function(e){IframeManager.getInstance().sendMessage(JSON.stringify(e))},t.prototype.onSocketOpen=function(){t.getInstance().dispatchEvent(new NetEvent(NetEvent.OPENSOCKET,null))},t.prototype.onSocketClose=function(){this.removeEventListeners(),console.log(">>>>>>>clsoe"),t.getInstance().dispatchEvent(new NetEvent(NetEvent.CLOSESOCKET,null))},t.prototype.onSocketError=function(){},t}(eui.Component);__reflect(WebsocketEngine.prototype,"WebsocketEngine");